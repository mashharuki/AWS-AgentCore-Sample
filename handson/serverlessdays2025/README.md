# 2025å¹´ serverless days 2025ã§ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—è¨˜éŒ²

## é«˜åº¦ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®æ®µéšçš„ãªã‚¹ãƒ†ãƒƒãƒ—

ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ã¯ã€Amazon Bedrock AgentCoreã®å„æ©Ÿèƒ½ãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã§é¡§å®¢ã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã™ã‚‹é«˜åº¦ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«å¤‰æ›ã™ã‚‹ã®ã«ã©ã®ã‚ˆã†ã«å½¹ç«‹ã¤ã‹ã‚’å­¦ç¿’ã—ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€AWSã‚³ã‚¹ãƒˆã‚’è¦‹ç©ã‚‚ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’é¡Œæã¨ã—ã¦ã€AgentCoreã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€æ©Ÿèƒ½æ‹¡å¼µã®æ§‹æˆè¦ç´ ã‚’æ®µéšçš„ã«çµ„ã¿è¾¼ã‚“ã§æ©Ÿèƒ½ã‚’å¼·åŒ–ã—ã¦ã„ãã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’é€šã˜ã¦ã€åŸºæœ¬çš„ãªAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’AgentCoreã§æ‹¡å¼µã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚

## AgentCoreã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ã“ã®å­¦ç¿’ä½“é¨“ã‚’é€šã˜ã¦ã€é«˜åº¦ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«å¿…è¦ãªã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’AgentCoreã«ä»»ã›ã€ã€ŒAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè‡ªä½“ã®é–‹ç™ºã€ã«é›†ä¸­ã§ãã‚‹ã“ã¨ã‚’å®Ÿæ„Ÿã—ã¦ãã ã•ã„ï¼

## èƒŒæ™¯ï¼šæŠ€è¡“çš„è² å‚µãŒè“„ç©ã—ã‚„ã™ã„AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–‹ç™º

AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä»•çµ„ã¿ã‚„å®Ÿè£…ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯æ€¥é€Ÿã«é€²åŒ–ã—ã¦ãŠã‚Šã€å®Ÿè£…æ™‚ã«ä½¿ç”¨ã™ã‚‹æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ãŒã™ãã«æ™‚ä»£é…ã‚Œã«ãªã‚Šã€æŠ€è¡“çš„è² å‚µãŒè“„ç©ã—ã‚„ã™ã„ã¨ã„ã†ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€2025å¹´æ™‚ç‚¹ã§ã¯ã€LangChainã€LangGraphã€CrewAIã€Mastraãªã©ã®æ§˜ã€…ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒç™»å ´ã—ã¦ãŠã‚Šã€GitHub Starã®æ•°ã‚’è¦‹ã¦ã‚‚ã€ã‚ˆã‚Šæ–°ã—ã„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒæ€¥é€Ÿã«äººæ°—ã‚’é›†ã‚ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

## AIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®æ¯”è¼ƒ

æ©Ÿæ¢°å­¦ç¿’è£½å“ã«æºã‚ã£ãŸã“ã¨ãŒã‚ã‚‹æ–¹ã¯ã€ã€ŒHidden Technical Debt in Machine Learning Systemsï¼ˆæ©Ÿæ¢°å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹éš ã‚ŒãŸæŠ€è¡“çš„è² å‚µï¼‰ã€ã«ã¤ã„ã¦èã„ãŸã“ã¨ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã“ã‚Œã¯ã€æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«è‡ªä½“ä»¥å¤–ã®ã‚³ã‚¹ãƒˆï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã€é‹ç”¨ã€è©•ä¾¡ã€ç›£è¦–ãªã©ï¼‰ãŒè¦‹è½ã¨ã•ã‚ŒãŒã¡ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºå”†ã—ã¦ã„ã¾ã™ã€‚

## MLã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹æŠ€è¡“çš„è² å‚µ

AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ç¯„å›²ã¨æ¨©é™ãŒæ‹¡å¤§ã™ã‚‹ã«ã¤ã‚Œã¦ã€ã“ã‚Œã‚‰ã®å‘¨è¾ºæ©Ÿèƒ½ã®é‡è¦æ€§ã¨å¿…è¦æ€§ã‚‚åŒæ§˜ã«ç„¡è¦–ã§ããªã„ã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–‹ç™ºã«é›†ä¸­ã™ã‚‹ãŸã‚ã«ã¯ã€å®Ÿè£…ã«ä¾å­˜ã—ãªã„ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨ã€æœ¬ç•ªç’°å¢ƒã«å¿…è¦ãªæ©Ÿèƒ½ã®ã‚ªãƒ•ãƒ­ãƒ¼ãƒ‰ãŒä¸å¯æ¬ ã§ã‚ã‚Šã€AgentCoreã¯ã¾ã•ã«ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚

## å­¦ç¿’ç›®æ¨™

ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚’é€šã˜ã¦ã€AgentCoreã®å„æ©Ÿèƒ½ã®ä½¿ç”¨æ–¹æ³•ã¨ãã®åˆ©ç‚¹ã‚’å­¦ç¿’ã—ã¾ã™ã€‚

### ğŸ§® Code Interpreterï¼šAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç”¨ã®ã‚»ã‚­ãƒ¥ã‚¢ãªã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒ
AWSã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚’å®Ÿè¡Œã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç”¨ã®ã‚»ã‚­ãƒ¥ã‚¢ãªã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ç’°å¢ƒã‚’æä¾›ã™ã‚‹AgentCore Code Interpreterã‚’æ´»ç”¨ã—ã¾ã™

### ğŸš€ Runtimeï¼šã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã¨ç®¡ç†
ä½œæˆã—ãŸã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã«ã€AgentCore Runtimeã‚’æ´»ç”¨ã—ã¾ã™ã€‚ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ä¾å­˜ã—ãªã„ä»•çµ„ã¿ã‚’ç†è§£ã—ã¾ã™

### ğŸ›¡ï¸ Identityï¼šAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®èªè¨¼ã¨èªå¯
ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®‰å…¨ã«å…¬é–‹ã™ã‚‹ãŸã‚ã«ã€AgentCore Identityã‚’æ´»ç”¨ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ç”¨ã®èªå¯æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™

### ğŸ”Œ Gatewayï¼šå¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®MCPã¸ã®å¤‰æ›ã¨æ¥ç¶š
ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ãƒ¡ãƒ¼ãƒ«ã§é€ä¿¡ã™ã‚‹ãŸã‚ã«ã€AgentCore Gatewayã‚’æ´»ç”¨ã—ã¦AWS Lambdaã§å®Ÿè£…ã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã‚’MCPçµŒç”±ã§ä½¿ç”¨ã—ã¾ã™

### ğŸ“Š Observabilityï¼šã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®é‹ç”¨ç›£è¦–
ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ä¿¡ã—ã€ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã€å¿œç­”ã‚’ç”Ÿæˆã—ã¦è¿”ã™ã¾ã§ã®ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®ãƒ•ãƒ­ãƒ¼ã‚’ç†è§£ã™ã‚‹ãŸã‚ã«ã€AgentCore Observabilityã‚’æ´»ç”¨ã—ã¦ç›£è¦–ã‚’è¡Œã„ã¾ã™

### ğŸ§  Memoryï¼šçŸ­æœŸãƒ»é•·æœŸãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆèªè­˜
ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒéå»ã®è¦‹ç©ã‚‚ã‚Šçµæœã‚’è¨˜æ†¶ã—ã€æ¯”è¼ƒã‚„ææ¡ˆã‚’è¡Œãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€AgentCore Memoryã‚’æ´»ç”¨ã—ã¦çŸ­æœŸãƒ»é•·æœŸãƒ¡ãƒ¢ãƒªæ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™

## å¯¾è±¡èª­è€…
- AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–‹ç™ºã«èˆˆå‘³ã®ã‚ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
- AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç”¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æ§‹ç¯‰ã‚’æ‹…å½“ã™ã‚‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ

## å‰ææ¡ä»¶

### äº‹å‰çŸ¥è­˜
- Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºç¤çŸ¥è­˜
- AWSã‚µãƒ¼ãƒ“ã‚¹ã®åŸºæœ¬çš„ãªç†è§£

### ç’°å¢ƒè¨­å®š
å‰ææ¡ä»¶ã§æº–å‚™ã§ãã¾ã™ã€‚

- AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆAmazon Bedrockã¨AgentCoreã®ä½¿ç”¨æ¨©é™ä»˜ãï¼‰
- Amazon Bedrock Claudeãƒ¢ãƒ‡ãƒ«ã®æœ‰åŠ¹åŒ–ï¼ˆus-west-2ï¼‰
- Python 3.11+ãŠã‚ˆã³uvãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
- Git
- AWS CLIè¨­å®š
- AWS Serverless Application Model (AWS SAM)ï¼ˆlab4ã®ã¿ï¼‰

## æ¨å®šæ™‚é–“
- **ç·æ‰€è¦æ™‚é–“**ï¼šç´„2æ™‚é–“
- **å„ãƒ©ãƒœ**ï¼š10-20åˆ†

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰
ã™ã¹ã¦ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã§å…¥æ‰‹å¯èƒ½ã§ã™ï¼š`sample-amazon-bedrock-agentcore-onboarding`

## é‡è¦ãªæ³¨æ„äº‹é …
Amazon Bedrock AgentCoreã¯åŸ·ç­†æ™‚ç‚¹ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ®µéšã«ã‚ã‚Šã¾ã™ã€‚æ©Ÿèƒ½ã¨ä¾¡æ ¼ã¯å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æœ€æ–°ã®ä¾¡æ ¼ã«ã¤ã„ã¦ã¯ã€Amazon Bedrock AgentCore Pricingã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

ã“ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ä½œæˆã•ã‚ŒãŸã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å‰Šé™¤ã™ã‚‹ã«ã¯ã€æœ€çµ‚ãƒšãƒ¼ã‚¸ã®ã€Œã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

# Lab 1: Code Interpreter - ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ ğŸ§®

## 1. å­¦ç¿’ç›®æ¨™

Amazon Bedrock AgentCore Code Interpreterã‚’ä½¿ç”¨ã—ã¦ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã‚»ã‚­ãƒ¥ã‚¢ãªã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒå†…ã§ä¿¡é ¼æ€§ã®é«˜ã„è¨ˆç®—ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹æ–¹æ³•ã‚’å­¦ç¿’ã—ã¾ã™ã€‚ã“ã®ãƒ©ãƒœã§ã¯ã€LangChainã€LangGraphã€ã¾ãŸã¯ãã®ä»–ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨äº’æ›æ€§ã®ã‚ã‚‹ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ä¾å­˜ã—ãªã„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ä½¿ç”¨ã—ã¦AWSã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã‚’å®Ÿæ¼”ã—ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¦ä»¶ã‚’è§£é‡ˆã—ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€å‹•çš„ãªè¨ˆç®—ã‚’å®Ÿè¡Œã—ã€è©³ç´°ãªã‚³ã‚¹ãƒˆæ¦‚è¦ã‚’ç”Ÿæˆã™ã‚‹AWSã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ§‹ç¯‰ã—ã¦å‹•ä½œã•ã›ã¾ã™ã€‚

### å­¦ç¿’ç›®æ¨™

- AgentCore Code InterpreterãŒã‚»ã‚­ãƒ¥ã‚¢ãªã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ç’°å¢ƒã¨ã—ã¦æŒã¤ç›®çš„ã¨åˆ©ç‚¹ã‚’ç†è§£ã™ã‚‹
- AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®èª¬æ˜ã‚’è§£é‡ˆã—ã€AWSã‚µãƒ¼ãƒ“ã‚¹ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹æ–¹æ³•ã‚’æ¢ç´¢ã™ã‚‹
- AWS Pricing MCPã‚’ä½¿ç”¨ã—ã¦ç¾åœ¨ã®ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹
- Pythonã‚³ãƒ¼ãƒ‰ã‚’å®‰å…¨ã«ç”Ÿæˆãƒ»å®Ÿè¡Œã—ã¦ã‚³ã‚¹ãƒˆã‚’é›†ç´„ã™ã‚‹
- å®Œå…¨ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œãƒ»ãƒ†ã‚¹ãƒˆã™ã‚‹

## 2. AgentCore Code Interpreterã®æ©Ÿèƒ½

### ã‚»ã‚­ãƒ¥ã‚¢ãªã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒ
- AIç”Ÿæˆã‚³ãƒ¼ãƒ‰ã‚’å®Œå…¨ã«åˆ†é›¢ã•ã‚ŒãŸç’°å¢ƒã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã®å®‰å…¨æ€§ã‚’ç¢ºä¿
- ãƒªã‚½ãƒ¼ã‚¹åˆ¶ç´„ï¼ˆãƒ¡ãƒ¢ãƒªãƒ»CPUä½¿ç”¨é‡åˆ¶é™ï¼‰ã«ã‚ˆã‚‹éåº¦ãªæ¶ˆè²»ã‚’é˜²æ­¢
- åˆ‡ã‚Šæ›¿ãˆå¯èƒ½ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆâ€»ã“ã®ãƒ©ãƒœã§ã¯å®Œå…¨ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ãŒã€å¿…è¦ã«å¿œã˜ã¦ä½œæˆæ™‚ã«ãƒ‘ãƒ–ãƒªãƒƒã‚¯æ¥ç¶šã‚’é¸æŠå¯èƒ½ã€‚è©³ç´°ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‚ç…§ï¼‰

### é‹ç”¨ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚¼ãƒ­ã®å®Œå…¨ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹
- ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ç®¡ç†ä¸è¦
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¿œã˜ã¦å³åº§ã«ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã€å¾“é‡èª²é‡‘åˆ¶
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ15åˆ†ã‹ã‚‰æœ€å¤§8æ™‚é–“ã¾ã§ã®é•·æ™‚é–“å®Ÿè¡Œã‚’ã‚µãƒãƒ¼ãƒˆ

### ä¸»è¦è¨€èªã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã™ãã«ä½¿ç”¨å¯èƒ½
- Python / JavaScript / TypeScriptã‚’æ¨™æº–ã‚µãƒãƒ¼ãƒˆï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰
- pandas / NumPy / Matplotlibãªã©ã®äººæ°—ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒäº‹å‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã™ãã«ä½¿ç”¨å¯èƒ½
- **ã‚»ã‚­ãƒ¥ã‚¢ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹**ï¼šãƒªã‚½ãƒ¼ã‚¹ä¹±ç”¨ã‚’é˜²ãã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç¶­æŒã™ã‚‹åˆ†é›¢å®Ÿè¡Œã‚’æä¾›

## 3. å®Ÿè£…ã‚·ãƒŠãƒªã‚ª

ã“ã®ãƒ©ãƒœã§ã¯ã€å¤šãã®ãƒ“ã‚¸ãƒã‚¹ã‚·ãƒŠãƒªã‚ªã§å¿…è¦ã¨ã•ã‚Œã‚‹ã€Œãƒ‡ãƒ¼ã‚¿åé›†ã¨è¨ˆç®—å®Ÿè¡Œã€ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ã€ã€ŒAWSã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã€ã‚’å®Ÿè¡Œã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã—ã¦å®Ÿè£…ã—ã¾ã™ã€‚Cost Estimator Agentã¯LLMã‚’ä½¿ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’è§£é‡ˆã—ã€AWS Pricing MCP Serverã§ä¾¡æ ¼ã‚’å–å¾—ã—ã€AgentCore Code Interpreterã§è¨ˆç®—ã‚’å®Ÿè¡Œã—ã¦çµæœã‚’è¿”ã—ã¾ã™ï¼š

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ› â†’ Cost Estimation Agent â†’ AWS Pricing MCP â†’ AgentCore Code Interpreter
                                   â†“
ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£èª¬æ˜ â†’ AWSä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿å–å¾— â†’ ç¾åœ¨ã®ä¾¡æ ¼æƒ…å ± â†’ ã‚³ã‚¹ãƒˆè¨ˆç®—å®Ÿè¡Œ â†’ ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šçµæœ â†’ è©³ç´°ãªã‚³ã‚¹ãƒˆå†…è¨³
```

### ã‚·ãƒŠãƒªã‚ªã®ç‰¹å¾´ï¼š

- **å®Ÿéš›ã®AWSä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿**ï¼šAWS Pricing MCP Serverã‚’ä½¿ç”¨ã—ã¦ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ä¾¡æ ¼ã‚’å–å¾—
- **ãƒ‡ãƒ¼ã‚¿é›†ç´„**ï¼šCode Interpreterã§å‹•çš„ãªã‚³ã‚¹ãƒˆé›†ç´„ã‚’å®Ÿè¡Œ
- **å®Ÿç”¨çš„ãªå‡ºåŠ›**ï¼šè©³ç´°ãªã‚³ã‚¹ãƒˆå†…è¨³ã¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¨å¥¨äº‹é …ã‚’ç”Ÿæˆ

## 4. ãƒ©ãƒœæ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1ï¼šãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•

ã¾ãšã€Lab1ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã—ã‚‡ã†ã€‚

```bash
cd /workshop/sample-amazon-bedrock-agentcore-onboarding/01_code_interpreter
```

ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ä»¥ä¸‹ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼š

```
01_code_interpreter/
â”œâ”€â”€ README.md                           # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ cost_estimator_agent/
â”‚   â”œâ”€â”€ config.py                       # è¨­å®šã¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
â”‚   â””â”€â”€ cost_estimator_agent.py         # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…
â””â”€â”€ test_cost_estimator_agent.py        # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
```

### ã‚¹ãƒ†ãƒƒãƒ—2ï¼šAWSã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…ã®ç†è§£

ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå…¥åŠ›ã‹ã‚‰å‡ºåŠ›ã¾ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹æ–¹æ³•ã‚’è©³ã—ãèª¬æ˜ã—ã€ãƒ•ãƒ­ãƒ¼ã¨å†…éƒ¨ãƒ­ã‚¸ãƒƒã‚¯ã‚’è©³ç´°ã«è§£èª¬ã—ã¾ã™ã€‚

#### å…¨ä½“çš„ãªå‡¦ç†ãƒ•ãƒ­ãƒ¼ã®ç†è§£

ãƒ¡ã‚¤ãƒ³å®Ÿè£…ã¯ `cost_estimator_agent/cost_estimator_agent.py` ã«ã‚ã‚Šã¾ã™ã€‚

AWSCostEstimatorAgentã¯ä¸€é€£ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’è‡ªå‹•åŒ–ã—ã¾ã™ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼è¦ä»¶ã®ç†è§£ã€å¿…è¦ãªAWSã‚µãƒ¼ãƒ“ã‚¹ã®ç‰¹å®šã€ä¾¡æ ¼ã®èª¿æŸ»ã€è¨ˆç®—ã®å®Ÿè¡Œã€‚ä¾‹ãˆã°ã€ã€ŒHTMLã§ãƒ‘ãƒ³å±‹ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ã§ãã‚‹ã ã‘å®‰ãä½œã‚ŠãŸã„ã€ã¨ã„ã†æŒ‡ç¤ºã¯ã€ä»¥ä¸‹ã®ãƒ•ãƒ­ãƒ¼ã§å‡¦ç†ã•ã‚Œã¾ã—ãŸï¼š

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ AWSCostEstimatorAgent.estimate_costs â†’ AWS Pricing MCP â†’ AgentCore Code Interpreter
         â†“
ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼šarchitecture_description â†’ ã‚¹ãƒ†ãƒƒãƒ—2.1ï¼šã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£ãƒ»åˆ†æ â†’ ã‚¹ãƒ†ãƒƒãƒ—2.2ï¼šAWSã‚µãƒ¼ãƒ“ã‚¹ä¾¡æ ¼å–å¾— â†’ ã‚¹ãƒ†ãƒƒãƒ—2.3ï¼šã‚³ã‚¹ãƒˆé›†ç´„ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ â†’ ã‚¹ãƒ†ãƒƒãƒ—2.4ï¼šã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ â†’ è¨ˆç®—çµæœè¿”å´ â†’ è¦‹ç©ã‚‚ã‚Šè¿”å´
```

å„ã‚¹ãƒ†ãƒƒãƒ—ã§ä½•ãŒèµ·ã“ã‚‹ã‹ã‚’è©³ã—ãè¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

#### ã‚¹ãƒ†ãƒƒãƒ—2.1ï¼šã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£ãƒ»åˆ†æ

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯æœ€åˆã«ã€`cost_estimator_agent/config.py` ã§å®šç¾©ã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½¿ç”¨ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦ä»¶ã‹ã‚‰å¿…è¦ãªAWSã‚µãƒ¼ãƒ“ã‚¹ã‚’ç‰¹å®šã—ã¾ã™ã€‚ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£èª¬æ˜ã‚’è§£æã—ã¦AWSã‚µãƒ¼ãƒ“ã‚¹ã‚’ç‰¹å®šã—ã€ãã®å¾Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã®ç¯„å›²ã‚’åˆ¶é™ã™ã‚‹ã¨ã„ã†æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¾“ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€ã€ŒHTMLã§ãƒ‘ãƒ³å±‹ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ã§ãã‚‹ã ã‘å®‰ãä½œã‚ŠãŸã„ã€ã‹ã‚‰ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯é™çš„ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ç”¨ã®Amazon S3ã¨CDNé…ä¿¡ç”¨ã®CloudFrontã‚’ç‰¹å®šã—ã¾ã™ã€‚

```python
# config.py SYSTEM_PROMPTã§å®šç¾©ã•ã‚ŒãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
WORKFLOW - IMPORTANT:
- FIRST: Parse the architecture description to identify AWS services
- SECOND: Use default region to limit the scope of pricing data
```

ä¾‹ãˆã°ã€ã€ŒHTMLã§ãƒ‘ãƒ³å±‹ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ã§ãã‚‹ã ã‘å®‰ãä½œã‚ŠãŸã„ã€ã¨ã„ã†å…¥åŠ›ã‹ã‚‰ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ¨è«–ã—ã¾ã™ï¼š

- é™çš„ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ â†’ Amazon S3
- CDNé…ä¿¡ â†’ CloudFront

#### ã‚¹ãƒ†ãƒƒãƒ—2.2ï¼šAWSã‚µãƒ¼ãƒ“ã‚¹ä¾¡æ ¼å–å¾—

ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ±ºå®šã—ãŸå¾Œã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ä¸€é€£ã®AWS Pricing MCPå‘¼ã³å‡ºã—ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã¾ãšã€ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ãŒåˆ©ç”¨å¯èƒ½ãªAWSã‚µãƒ¼ãƒ“ã‚¹ã‚’çŸ¥ã‚‹ãŸã‚ã«ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒªã‚¹ãƒˆã‚’åé›†ã—ã¾ã™ã€‚æ¬¡ã«ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ãƒ©ã‚¹ãªã©ã€ã“ã‚Œã‚‰ã®ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¯èƒ½ãªå±æ€§ã‚’å–å¾—ã—ã¾ã™ã€‚ãã®å¾Œã€æ­£ç¢ºãªã‚¯ã‚¨ãƒªã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã«æœ‰åŠ¹ãªå±æ€§å€¤ã‚’å–å¾—ã—ã¾ã™ã€‚æœ€å¾Œã«ã€ã“ã‚Œã‚‰ã®ãƒ•ã‚£ãƒ«ã‚¿ã‚’ä½¿ç”¨ã—ã¦ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ã‚¨ãƒªã—ã¾ã™ã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€ç„¡åŠ¹ãªãƒ•ã‚£ãƒ«ã‚¿ãªã©ã®ã‚¨ãƒ©ãƒ¼ã‚’å‡¦ç†ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’åˆ†æã—ã€ãƒ•ã‚£ãƒ«ã‚¿æ¡ä»¶ã‚’ä¿®æ­£ã—ã€è‡ªå‹•çš„ã«å†è©¦è¡Œã—ã¦æœ‰åŠ¹ãªä¾¡æ ¼æƒ…å ±ã‚’ç¢ºå®Ÿã«å–å¾—ã—ã¾ã™ã€‚

```
Agent â†’ AWS Pricing MCP
1. get_pricing_service_codes() â†’ åˆ©ç”¨å¯èƒ½ãªã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒªã‚¹ãƒˆ
2. get_pricing_service_attributes("AmazonS3") â†’ S3ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¯èƒ½å±æ€§
3. get_pricing_attribute_values("AmazonS3", "usagetype") â†’ å±æ€§ã®å¯èƒ½ãªå€¤
4. get_pricing("AmazonS3", filters) â†’ å®Ÿéš›ã®ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿
```

ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯`_setup_aws_pricing_client`ãƒ¡ã‚½ãƒƒãƒ‰ã§åˆæœŸåŒ–ã•ã‚Œã€ç¾åœ¨ã®AWSèªè¨¼æƒ…å ±ã‚’ä½¿ç”¨ã—ã¦ä¾¡æ ¼APIã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚

AWS Pricing APIã‚’å‘¼ã³å‡ºã™éš›ã€ä¸æ­£ãªãƒ•ã‚£ãƒ«ã‚¿æ¡ä»¶ã«ã‚ˆã‚Šã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ãŒã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯è‡ªå‹•çš„ã«ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’ç¢ºèªã—ã€ãƒ•ã‚£ãƒ«ã‚¿æ¡ä»¶ã‚’ä¿®æ­£ã—ã¦å†è©¦è¡Œã—ã¾ã™ã€‚

#### ã‚¹ãƒ†ãƒƒãƒ—2.3ï¼šã‚³ã‚¹ãƒˆé›†ç´„ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ

ä¾¡æ ¼æƒ…å ±ã¨ä½¿ç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚’å‹•çš„ã«è¨ˆç®—ã™ã‚‹Pythonã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ã‚®ã‚¬ãƒã‚¤ãƒˆå½“ãŸã‚Šã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¾¡æ ¼ã€æ¨å®šã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚µã‚¤ã‚ºã€ãƒ‡ãƒ¼ã‚¿è»¢é€ã®æ–™é‡‘ãªã©ã®å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’ä½¿ç”¨ã—ã¦ã€ã‚³ãƒ¼ãƒ‰ã¯å€‹åˆ¥ã®ã‚³ã‚¹ãƒˆã‚’è¨ˆç®—ã—ã€åˆè¨ˆã—ã¦æœˆæ¬¡è¦‹ç©ã‚‚ã‚Šã®åˆè¨ˆã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã“ã®å‹•çš„ã«ç”Ÿæˆã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã«åˆã‚ã›ã¦èª¿æ•´ã•ã‚Œã€æŸ”è»Ÿã§æ­£ç¢ºãªã‚³ã‚¹ãƒˆè¨ˆç®—ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

```python
# === S3ã‚³ã‚¹ãƒˆè¨ˆç®— ===
s3_storage_price = 0.023  # MCPã‹ã‚‰å–å¾—ã—ãŸå®Ÿéš›ã®ä¾¡æ ¼
website_size_gb = 0.1
storage_cost = website_size_gb * s3_storage_price

# === ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚³ã‚¹ãƒˆ ===
transfer_price = 0.09  # MCPã‹ã‚‰å–å¾—ã—ãŸä¾¡æ ¼
monthly_visitors = 1000
avg_page_size_mb = 2
data_transfer_gb = (monthly_visitors * avg_page_size_mb) / 1024
transfer_cost = max(0, data_transfer_gb - 1) * transfer_price

# === çµæœå‡ºåŠ› ===
print(f"S3ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: ${storage_cost:.2f}/æœˆ")
print(f"ãƒ‡ãƒ¼ã‚¿è»¢é€: ${transfer_cost:.2f}/æœˆ")
print(f"åˆè¨ˆ: ${storage_cost + transfer_cost:.2f}/æœˆ")
```

#### ã‚¹ãƒ†ãƒƒãƒ—2.4ï¼šã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ

ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¯`execute_cost_calculation`ãƒ„ãƒ¼ãƒ«ã«æ¸¡ã•ã‚Œã€AgentCore Code Interpreterã§å®‰å…¨ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚Code Interpreterã¯`start()`ã§é–‹å§‹ã—`stop()`ã§åœæ­¢ã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ã§ã™ã€‚åŸºæœ¬çš„ãªæ“ä½œã¯4ã¤ã‚ã‚Šã¾ã™ï¼š

- **ç’°å¢ƒä½œæˆ**ï¼š`self.code_interpreter = CodeInterpreter(self.region)`
- **èµ·å‹•**ï¼š`self.code_interpreter.start()`
- **ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ**ï¼š`self.code_interpreter.invoke("executeCode", {"language": "python", "code": calculation_code})`
- **ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³**ï¼š`self.code_interpreter.stop()`

å®Ÿéš›ã®å®Ÿè£…ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

```python
from bedrock_agentcore.tools.code_interpreter_client import CodeInterpreter

# 1. ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
interpreter = CodeInterpreter(region="us-west-2")

# 2. ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹
interpreter.start()

# 3. ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ
result = interpreter.invoke("executeCode", {
    "language": "python",
    "code": "print('ã‚»ã‚­ãƒ¥ã‚¢ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã‹ã‚‰ã“ã‚“ã«ã¡ã¯ï¼')"
})

# 4. ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†
interpreter.stop()
```

ä»¥ä¸‹ã®ã‚ˆã†ã«ã€`@contextmanager`ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€å‡¦ç†ãŒæˆåŠŸã—ã¦ã‚‚å¤±æ•—ã—ã¦ã‚‚Code InterpreterãŒç¢ºå®Ÿã«åœæ­¢ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ï¼š

```python
@contextmanager
def _estimation_agent(self) -> Generator[Agent, None, None]:
    """ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼"""        
    try:
        self._setup_code_interpreter()  # Code Interpreteré–‹å§‹
        aws_pricing_client = self._setup_aws_pricing_client()
        
        # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã—å‡¦ç†ã‚’å®Ÿè¡Œ
        with aws_pricing_client:
            # ... ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‡¦ç† ...
            yield agent
            
    except Exception as e:
        logger.exception(f"âŒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å¤±æ•—: {e}")
        raise
    finally:
        self.cleanup()  # Code Interpreterã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã‚’å«ã‚€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
```

### ã‚¹ãƒ†ãƒƒãƒ—3ï¼šã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿè¡Œ

å®Ÿè£…ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã«ã€ã‚µãƒ³ãƒ—ãƒ«ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£èª¬æ˜ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å‘¼ã³å‡ºã™æä¾›ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

```bash
uv run python test_cost_estimator_agent.py --architecture "HTMLã§ãƒ‘ãƒ³å±‹ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ã§ãã‚‹ã ã‘å®‰ãä½œã‚ŠãŸã„"
```

ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯å…¥åŠ›ã‚’å‡¦ç†ã—ã€é©åˆ‡ãªä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹åŒ–ã•ã‚ŒãŸãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§è¨ˆç®—ã‚’å®Ÿè¡Œã—ã€æ¨å®šæœˆæ¬¡ã‚³ã‚¹ãƒˆã®æ§‹é€ åŒ–ã•ã‚ŒãŸæ¦‚è¦ã‚’è¿”ã—ã¾ã™ã€‚å‡ºåŠ›ã¯é€šå¸¸ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦ï¼ˆAmazon S3ã¨Route 53ã®ä½¿ç”¨ãªã©ï¼‰ã®è©³ç´°ã«ç¶šãã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€ãƒ‡ãƒ¼ã‚¿è»¢é€ã€ãã®ä»–ã®é–¢é€£æ–™é‡‘ã‚’å«ã‚€ã‚³ã‚¹ãƒˆã®å†…è¨³ã‚’ç¤ºã—ã¾ã™ã€‚å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

```
# ãƒ‘ãƒ³å±‹å‘ã‘AWSé™çš„ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚³ã‚¹ãƒˆåˆ†æ

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

æœ€ã‚‚ã‚³ã‚¹ãƒˆåŠ¹æœçš„ãªãƒ‘ãƒ³å±‹ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ææ¡ˆã—ã¾ã™ï¼š

1. **Amazon S3**ï¼šé™çš„HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°
2. **Amazon Route 53**ï¼šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ãƒ‰ãƒ¡ã‚¤ãƒ³åç®¡ç†ã¨DNS

ã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ã€HTMLã§ä½œæˆã•ã‚ŒãŸé™çš„ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’æœ€å°ã‚³ã‚¹ãƒˆã§é‹ç”¨ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

## ã‚³ã‚¹ãƒˆå†…è¨³ï¼ˆæœˆæ¬¡ï¼‰

### åŸºæœ¬ãƒ—ãƒ©ãƒ³ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³åãªã—ï¼‰
...
```

## 5. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

èªè¨¼æƒ…å ±ã‚„è¨­å®šã®ä¸å‚™ã«ã‚ˆã‚Šã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ã‚¬ã‚¤ãƒ‰ã™ã‚‹ãŸã‚ã«ãƒ­ã‚°ãŒè¨˜éŒ²ã•ã‚Œã¾ã™ã€‚

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

#### 1. AWSèªè¨¼æƒ…å ±ãŒè¦‹ã¤ã‹ã‚‰ãªã„

```
botocore.exceptions.NoCredentialsError: Unable to locate credentials
```

**è§£æ±ºç­–ï¼š**

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒAWSèªè¨¼æƒ…å ±ã‚’è¦‹ã¤ã‘ã‚‰ã‚Œãªã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

```bash
aws configure list
```

ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹ã«ã¯ï¼ˆboto3/AWS CLIãŒè‡ªå‹•çš„ã«èª­ã¿è¾¼ã¿ã¾ã™ï¼‰ï¼š

```bash
export AWS_ACCESS_KEY_ID=xxxxxx
export AWS_SECRET_ACCESS_KEY=xxxxxx
export AWS_SESSION_TOKEN=your_session_token  # ä¸€æ™‚èªè¨¼æƒ…å ±ã®å ´åˆã®ã¿
```

èªè¨¼æƒ…å ±ã‚’æä¾›ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã§AWS CLIã‚’è¨­å®šã§ãã¾ã™ï¼š

```bash
aws configure
```

#### 2. ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„

```
You must specify a region
```

**è§£æ±ºç­–ï¼š** ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹æœçš„ã«ã‚¯ã‚¨ãƒªã™ã‚‹ãŸã‚ã«ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¿…è¦ã§ã™ã€‚

AWS CLIãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨­å®šï¼ˆæ¨å¥¨ï¼‰

```bash
aws configure set region us-west-2
# ã¾ãŸã¯ç‰¹å®šã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦è¨­å®š
aws configure set region us-west-2 --profile myprofile
```

ç’°å¢ƒå¤‰æ•°ã§ä¸€æ™‚çš„ã«è¨­å®šï¼š

```bash
export AWS_DEFAULT_REGION=us-west-2  # AWS_REGIONã‚‚æ©Ÿèƒ½ã—ã¾ã™
```

#### 3. MCPã‚µãƒ¼ãƒãƒ¼æ¥ç¶šã‚¨ãƒ©ãƒ¼

```
Failed to connect to AWS Pricing MCP server
```

**è§£æ±ºç­–ï¼š**

uvx CLIãƒ„ãƒ¼ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼ˆMCPã®å‘¼ã³å‡ºã—ã«ä½¿ç”¨ï¼‰ï¼š

```bash
which uvx
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆã¯å®Ÿè¡Œï¼š
pip install uv
```

ã¾ãŸã€IAMãƒ­ãƒ¼ãƒ«ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ãŒPricing APIã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆpricing:*ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ã‚’è¨±å¯ã—ã€ã“ã‚Œã‚‰ã®å‘¼ã³å‡ºã—ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®å•é¡ŒãŒãªã„ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "pricing:*",
      "Resource": "*"
    }
  ]
}
```

## 6. å­¦ç¿’ç›®æ¨™é”æˆã®ç¢ºèª

ã“ã®ãƒ©ãƒœã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’è§£é‡ˆã—ã€ãƒ©ã‚¤ãƒ–AWSä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ã‚¨ãƒªã—ã€AgentCore Code Interpreterã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã§å‹•çš„ãªè¨ˆç®—ã‚’å®‰å…¨ã«å®Ÿè¡Œã§ãã‚‹AWSã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ§‹ç¯‰ã—ã¾ã—ãŸã€‚ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ã€LangChainã€LangGraphã€ãã®ä»–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§æ§‹ç¯‰ã•ã‚ŒãŸAIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒAgentCoreã‚’ä»‹ã—ã¦ä¿¡é ¼æ€§ã®é«˜ã„è¨ˆç®—æ©Ÿèƒ½ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã‚’å®Ÿæ¼”ã—ã¦ã„ã¾ã™ã€‚

### é”æˆç¢ºèªï¼š

ä»¥ä¸‹ã‚’å­¦ç¿’ã—ã¾ã—ãŸï¼š

âœ… Code Interpreterã¯å®Ÿè£…ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«é–¢ä¿‚ãªãä½¿ç”¨ã§ãã€LangChainã€LangGraphã€ã¾ãŸã¯é¸æŠã—ãŸä»–ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨äº’æ›æ€§ãŒã‚ã‚Šã¾ã™ã€‚

âœ… AgentCore Code Interpreterã¯startã¨stopãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã—ã€è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ã®ç®¡ç†ã‚’ç°¡å˜ã«ã—ã¾ã™ã€‚

âœ… ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸä¾¡æ ¼é›†ç´„ã‚³ãƒ¼ãƒ‰ã¯ã€`execute_cost_calculation`ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦Code Interpreterã®ã‚»ã‚­ãƒ¥ã‚¢ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒã§å®‰å…¨ã«å®Ÿè¡Œã§ãã€AWSã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ä¿¡é ¼æ€§ã®é«˜ã„çµæœã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

âœ… ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¨ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯`cost_estimator_agent/config.py`ã§å®šç¾©ã•ã‚Œã¦ãŠã‚Šã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç†è§£ã¨ã‚³ã‚¹ãƒˆè¨ˆç®—ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¦‹ç©ã‚‚ã‚Šãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å…¨ä½“ã‚’é€šã˜ã¦ã‚¬ã‚¤ãƒ‰ã—ã¾ã™ã€‚

## 7. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

Lab 2: AgentCore Runtimeã«é€²ã¿ã€AWSã®å®Œå…¨ãƒãƒãƒ¼ã‚¸ãƒ‰AgentCore Runtimeä¸Šã§ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã—ã‚‡ã†ã€‚


## ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®è¨˜éŒ²

ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
git config --global user.name "Your Name"
git config --global user.email you@example.com

git config --global init.defaultBranch main
```

Gitãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/aws-samples/sample-amazon-bedrock-agentcore-onboarding.git
cd sample-amazon-bedrock-agentcore-onboarding
```

```bash
uv sync

uv run python -c "import boto3; print('AWS SDK:', boto3.__version__)"
uv run python -c "import bedrock_agentcore; print('AgentCore SDK installed successfully')"
```

ãƒªãƒ¼ã‚¸ãƒ§ãƒ³è¨­å®š

```bash
aws configure set region us-west-2

aws configure get region
```

ãã—ã¦ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰ä»¥ä¸‹ã®2ã¤ã®ãƒ¢ãƒ‡ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¦æ±‚ã™ã‚‹

- Claude Sonnet 4
- Claude 3.7 Sonnet

ã¾ãšã€Transaction Search ãŒæ—¢ã«æœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹

```bash
aws xray get-trace-segment-destination
```

{
    "Destination": "CloudWatchLogs",
    "Status": "ACTIVE"
}

ãƒ©ãƒœ1ç”¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•

```bash
cd /workshop/sample-amazon-bedrock-agentcore-onboarding/01_code_interpreter
```

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ©Ÿèƒ½ã‚’å‘¼ã³å‡ºã™

```bash
uv run python test_cost_estimator_agent.py --architecture "ãƒ‘ãƒ³å±‹ã®Webã‚µã‚¤ãƒˆã‚’HTMLã§ãªã‚‹ã¹ãå®‰ãä½œã‚ŠãŸã„"
```

```bash
ğŸš€ Testing AWS Cost Agent
Architecture: ãƒ‘ãƒ³å±‹ã®Webã‚µã‚¤ãƒˆã‚’HTMLã§ãªã‚‹ã¹ãå®‰ãä½œã‚ŠãŸã„
Tests to run: regular
ğŸ“„ Testing regular cost estimation...
Installed 46 packages in 79ms
INFO:mcp.server.lowlevel.server:Processing request of type ListToolsRequest
I need to provide a cost estimate for a bakery website built in HTML with minimal cost on AWS. Let me analyze this request in Japanese since the query is in Japanese.

ã¾ãšã€ãƒ‘ãƒ³å±‹ã®ã‚·ãƒ³ãƒ—ãƒ«ãªHTMLã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’AWSã§ä½ã‚³ã‚¹ãƒˆã§æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®è²»ç”¨è¦‹ç©ã‚‚ã‚Šã‚’ä½œæˆã—ã¾ã™ã€‚

ã¾ãšåˆ©ç”¨å¯èƒ½ãªAWSã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ï¼š
Tool #1: get_pricing_service_codes
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
HTMLã‚µã‚¤ãƒˆã®å ´åˆã€ä½ã‚³ã‚¹ãƒˆã§æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®ä¸»ãªã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦ã¯ä»¥ä¸‹ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ï¼š

1. Amazon S3ï¼ˆé™çš„ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ï¼‰
2. Amazon CloudFrontï¼ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„é…ä¿¡ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼‰
3. Route 53ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ç®¡ç†ã¨DNSï¼‰

ã¾ãšã€Amazon S3ã®æ–™é‡‘ã‚’èª¿æŸ»ã—ã¾ã™ï¼š
Tool #2: get_pricing_service_attributes
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
S3ã®é‡è¦ãªå±æ€§å€¤ã‚’ç¢ºèªã—ã¾ã™ï¼š
Tool #3: get_pricing_attribute_values
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
æ¬¡ã«ã€CloudFrontã®å±æ€§ã‚’èª¿æŸ»ã—ã¾ã™ï¼š
Tool #4: get_pricing_service_attributes
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Route 53ã®å±æ€§ã‚‚ç¢ºèªã—ã¾ã™ï¼š
Tool #5: get_pricing_service_attributes
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
AWS Amplifyã‚‚æ¤œè¨ã—ã¾ã™ï¼ˆã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ç”¨ï¼‰ï¼š
Tool #6: get_pricing_service_attributes
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
ã§ã¯ã€å®Ÿéš›ã®æ–™é‡‘ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ãã¾ã™ã€‚ã¾ãšæ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆAsia Pacific (Tokyo)ï¼‰ã®S3ã®æ–™é‡‘ã‚’ç¢ºèªã—ã¾ã™ï¼š
Tool #7: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
S3ã®ãƒ‡ãƒ¼ã‚¿å–ã‚Šå‡ºã—æ–™é‡‘ã‚‚ç¢ºèªã—ã¾ã—ã‚‡ã†ï¼š
Tool #8: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
2025-09-21 05:20:52.799 | ERROR    | awslabs.aws_pricing_mcp_server.server:create_error_response:64 - No results found for given filters [[PricingFilter(field='operation', type='EQUALS', value='GetObject')]], service: "AmazonS3", region "ap-northeast-1"
CloudFrontã®æ–™é‡‘ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ï¼š
Tool #9: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
CloudFrontã®è¿½åŠ ãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—ã—ã¾ã™ï¼ˆãƒ‡ãƒ¼ã‚¿è»¢é€æ–™é‡‘ï¼‰ï¼š
Tool #10: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
2025-09-21 05:21:09.490 | ERROR    | awslabs.aws_pricing_mcp_server.server:create_error_response:64 - No results found for given filters [[PricingFilter(field='productFamily', type='EQUALS', value='Data Transfer')]], service: "AmazonCloudFront", region "us-east-1"
Route 53ã®æ–™é‡‘æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ï¼š
Tool #11: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Route 53ã®è¿½åŠ ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ãƒ›ã‚¹ãƒˆã‚¾ãƒ¼ãƒ³æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ï¼š
Tool #12: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
2025-09-21 05:21:27.667 | ERROR    | awslabs.aws_pricing_mcp_server.server:create_error_response:64 - No results found for given filters [[PricingFilter(field='productFamily', type='EQUALS', value='DNS Zone')]], service: "AmazonRoute53", region "us-east-1"
ãã‚Œã§ã¯ã€Amplifyã®æ–™é‡‘æƒ…å ±ã‚‚å–å¾—ã—ã¾ã™ï¼š
Tool #13: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
ã“ã‚Œã§å¿…è¦ãªæ–™é‡‘æƒ…å ±ãŒæƒã„ã¾ã—ãŸã®ã§ã€å®Ÿéš›ã®ã‚³ã‚¹ãƒˆè¨ˆç®—ã‚’è¡Œã„ã¾ã™ï¼š
Tool #14: execute_cost_calculation
```

åˆ¥ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã¤ã„ã¦èã„ã¦ã¿ãŸï¼

```bash
uv run python test_cost_estimator_agent.py --architecture "AWS KMSã¨Nitro Enclavesã‚’ä½¿ã£ã¦ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå‘ã‘Web3ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®APIã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆã—ãŸã„ã§ã™ã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚„å¯ç”¨æ€§ã«ã¤ã„ã¦ã¯æœ€é«˜ãƒ¬ãƒ™ãƒ«ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚"
```

# Lab 2: AgentCore Runtime - ã‚¯ãƒ©ã‚¦ãƒ‰ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ ğŸš€

Amazon Bedrock AgentCore Runtime ã‚’ä½¿ã£ã¦AI Agentã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã‚‹ï¼

## 2. AgentCore Runtime ã®ç‰¹å¾´

- AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãŸã‚ã®ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãªå®Ÿè¡Œç’°å¢ƒ
  - ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹æ™‚ã®ã¿ç¨¼åƒã€‚æœ€å¤§ 8 æ™‚é–“ã®é•·æ™‚é–“ã‚¿ã‚¹ã‚¯ã‚‚å®Ÿè¡Œå¯èƒ½
  - å®Ÿéš›ã®ç¨¼åƒæ™‚é–“ã®ã¿èª²é‡‘ã®å¯¾è±¡ã¨ãªã‚Šã€LLM ã®å¿œç­”å¾…ã¡æ™‚é–“ã¯èª²é‡‘å¯¾è±¡å¤–ã¨ãªã‚‹
  - MCP ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªãƒ©ãƒ³ã‚¿ã‚¤ãƒ 

- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã”ã¨ã®éš”é›¢ã«ã‚ˆã‚‹æ©Ÿå¯†æ€§
  - å„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯å°‚ç”¨ã® microVM ã§ç¨¼åƒã—ã€ãƒ¡ãƒ¢ãƒªã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã€æ¼”ç®—è£…ç½® (CPU) ãŒäº’ã„ã«ç‹¬ç«‹
  - AgentCore Identity ã¨ã®é€£æºã«ã‚ˆã‚‹æ§˜ã€…ãªèªè¨¼èªå¯æ–¹å¼ã«ã‚ˆã‚‹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
  - AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã”ã¨ã«å‡¦ç†ã‚’ãƒˆãƒ¬ãƒ¼ã‚¹ã™ã‚‹çµ„è¾¼ã¿ã®æ©Ÿèƒ½

- å®Ÿè£…éä¾å­˜
  - å®Ÿè£…è¨€èªãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã‚‰ãšç‰¹å®š API ã‚’å®Ÿè£…ã™ã‚‹ Docker ã‚³ãƒ³ãƒ†ãƒŠã§ã‚ã‚Œã°å‹•ã‹ã™ã“ã¨ãŒã§ãã‚‹

- ã‚·ãƒŠãƒªã‚ªã®ç‰¹å¾´
  - è‡ªå‹•åŒ–ã•ã‚ŒãŸãƒ‡ãƒ—ãƒ­ã‚¤: IAMãƒ­ãƒ¼ãƒ«ä½œæˆã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§è‡ªå‹•åŒ–
  - å†åˆ©ç”¨æ€§ã®é«˜ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ: AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿè£…ã¯ deployment ã«éš”é›¢ã—ã€å†…éƒ¨ã‚’å·®ã—æ›¿ãˆå¯èƒ½ã«
  - AgentCore Runtime å†…ã§ã® MCP åˆ©ç”¨: è¦‹ç©ã‚‚ã‚Šã«åˆ©ç”¨ã—ã¦ã„ã‚‹ MCP Server ã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã§ã‚‚åˆ©ç”¨ã™ã‚‹æ–¹æ³•ã‚’ç¤ºã™

```bash
cd /workshop/sample-amazon-bedrock-agentcore-onboarding/02_runtime
```

```bash
02_runtime/
â”œâ”€â”€ README.md                    # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ prepare_agent.py             # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæº–å‚™ãƒ„ãƒ¼ãƒ«
â””â”€â”€ deployment/                  # ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
   â”œâ”€â”€ invoke.py                 # AgentCore Runtime ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
   â”œâ”€â”€ requirements.txt          # ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
   â””â”€â”€ cost_estimator_agent/     # ã‚³ãƒ”ãƒ¼ã•ã‚ŒãŸã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«
```

# ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™ã®ãŸã‚ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

`prepare_agent.py`

- ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
- IAM ãƒ­ãƒ¼ãƒ«ã®è‡ªå‹•ä½œæˆã¨æ¨©é™è¨­å®š
- agentcore CLI ã‚³ãƒãƒ³ãƒ‰ã®ç”Ÿæˆ


ä»¥ä¸‹ã§å®Ÿéš›ã«å‘¼ã³å‡ºã—

```bash
uv run prepare_agent.py --source-dir ../01_code_interpreter/cost_estimator_agent
```

ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Œã°OK!

```bash
âœ“ Agent preparation completed successfully!

Agent Name: cost_estimator_agent
Deployment Directory: deployment
Region: us-west-2

ğŸ“‹ Next Steps:

1. Configure the agent runtime:
   
uv run agentcore configure --entrypoint deployment/invoke.py \
--name cost_estimator_agent \
--execution-role arn:aws:iam::333736017435:role/AgentCoreRole-cost_estimator_agent \
--requirements-file deployment/requirements.txt \
--region us-west-2 

2. Launch the agent:
   uv run agentcore launch

3. Test your agent:
   uv run agentcore invoke '{"prompt": "I would like to connect t3.micro from my PC. How much does it cost?"}'

ğŸ’¡ Tip: You can copy and paste the commands above directly into your terminal.
```

Agentå®Ÿè¡Œç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
uv run agentcore configure --entrypoint deployment/invoke.py \
--name cost_estimator_agent \
--execution-role arn:aws:iam::333736017435:role/AgentCoreRole-cost_estimator_agent \
--requirements-file deployment/requirements.txt \
--region us-west-2 
```

å®Ÿè¡Œçµæœ

```bash
Configuring Bedrock AgentCore...
Entrypoint parsed: file=/workshop/sample-amazon-bedrock-agentcore-onboarding/02_runtime/deployment/invoke.py, bedrock_agentcore_name=invoke
Agent name: cost_estimator_agent

ğŸ—ï¸  ECR Repository
Press Enter to auto-create ECR repository, or provide ECR Repository URI to use existing
ECR Repository URI (or press Enter to auto-create):
âœ“ Will auto-create ECR repository
âœ“ Using requirements file: /workshop/sample-amazon-bedrock-agentcore-onboarding/02_runtime/deployment/requirements.txt

ğŸ” Authorization Configuration
By default, Bedrock AgentCore uses IAM authorization.
Configure OAuth authorizer instead? (yes/no) [no]:
âœ“ Using default IAM authorization
Configuring BedrockAgentCore agent: cost_estimator_agent
Generated Dockerfile: /workshop/sample-amazon-bedrock-agentcore-onboarding/02_runtime/Dockerfile
Generated .dockerignore: /workshop/sample-amazon-bedrock-agentcore-onboarding/02_runtime/.dockerignore
Setting 'cost_estimator_agent' as default agent
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Bedrock AgentCore Configured â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Configuration Summary                                                                                                             â”‚
â”‚                                                                                                                                   â”‚
â”‚ Name: cost_estimator_agent                                                                                                        â”‚
â”‚ Runtime: Docker                                                                                                                   â”‚
â”‚ Region: us-west-2                                                                                                                 â”‚
â”‚ Account: 333736017435                                                                                                             â”‚
â”‚ Execution Role: arn:aws:iam::333736017435:role/AgentCoreRole-cost_estimator_agent                                                 â”‚
â”‚ ECR: Auto-create                                                                                                                  â”‚
â”‚ Authorization: IAM (default)                                                                                                      â”‚
â”‚                                                                                                                                   â”‚
â”‚ Configuration saved to: /workshop/sample-amazon-bedrock-agentcore-onboarding/02_runtime/.bedrock_agentcore.yaml                   â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

ãã—ãŸã‚‰ä»¥ä¸‹ã®ã‚ˆã†ãªæˆæœç‰©ãŒ2ã¤å‡ºæ¥ä¸ŠãŒã‚‹

- `.bedrock_agentcore.yaml`

  ```yaml
  default_agent: cost_estimator_agent
  agents:
    cost_estimator_agent:
      name: cost_estimator_agent
      entrypoint: deployment/invoke.py
      platform: linux/arm64
      container_runtime: docker
      aws:
        execution_role: arn:aws:iam::333736017435:role/AgentCoreRole-cost_estimator_agent
        execution_role_auto_create: true
        account: '333736017435'
        region: us-west-2
        ecr_repository: 333736017435.dkr.ecr.us-west-2.amazonaws.com/bedrock-agentcore-cost_estimator_agent
        ecr_auto_create: false
        network_configuration:
          network_mode: PUBLIC
        protocol_configuration:
          server_protocol: HTTP
        observability:
          enabled: true
      bedrock_agentcore:
        agent_id: cost_estimator_agent-pPh4sFBIf0
        agent_arn: arn:aws:bedrock-agentcore:us-west-2:333736017435:runtime/cost_estimator_agent-pPh4sFBIf0
        agent_session_id: null
      codebuild:
        project_name: null
        execution_role: null
        source_bucket: null
      authorizer_configuration: null
      oauth_configuration: null
  ```

- `Dockerfile`

  ```yaml
  FROM public.ecr.aws/docker/library/python:3.12-slim
  WORKDIR /app

  COPY deployment/requirements.txt deployment/requirements.txt
  # Install from requirements file
  RUN pip install -r deployment/requirements.txt

  RUN pip install aws-opentelemetry-distro>=0.10.0

  # Set AWS region environment variable
  ENV AWS_REGION=us-west-2
  ENV AWS_DEFAULT_REGION=us-west-2

  # Signal that this is running in Docker for host binding logic
  ENV DOCKER_CONTAINER=1

  # Create non-root user
  RUN useradd -m -u 1000 bedrock_agentcore
  USER bedrock_agentcore

  EXPOSE 8080
  EXPOSE 8000

  # Copy entire project (respecting .dockerignore)
  COPY . .

  # Use the full module path

  CMD ["opentelemetry-instrument", "python", "-m", "deployment.invoke"]
  ```

AI Agentã‚’èµ·å‹•

```bash
uv run agentcore launch
```

```bash
â ¹ Launching Bedrock AgentCore...Build: #9 9.115 ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.
â § Launching Bedrock AgentCore...Docker image built: bedrock_agentcore-cost_estimator_agent:latest
â ‡ Launching Bedrock AgentCore...Using execution role from config: arn:aws:iam::333736017435:role/AgentCoreRole-cost_estimator_agent
â ¸ Launching Bedrock AgentCore...âœ… Execution role validation passed: arn:aws:iam::333736017435:role/AgentCoreRole-cost_estimator_agent
Uploading to ECR...
Getting or creating ECR repository for agent: cost_estimator_agent
Repository doesn't exist, creating new ECR repository: bedrock-agentcore-cost_estimator_agent
â § Launching Bedrock AgentCore...âœ… ECR repository available: 333736017435.dkr.ecr.us-west-2.amazonaws.com/bedrock-agentcore-cost_estimator_agent
â ‡ Launching Bedrock AgentCore...Authenticating with registry...
â  Launching Bedrock AgentCore...Registry authentication successful
Tagging image: bedrock_agentcore-cost_estimator_agent:latest -> 333736017435.dkr.ecr.us-west-2.amazonaws.com/bedrock-agentcore-cost_estimator_agent:latest
Pushing image to registry...
The push refers to repository [333736017435.dkr.ecr.us-west-2.amazonaws.com/bedrock-agentcore-cost_estimator_agent]
d677f705347f: Pushed 
005b5699a466: Pushed 
b93de3ea68d6: Pushed 
6af192bd922b: Pushed 
4f5bc6e74790: Pushed 
2347ad40e3c8: Pushed 
9631e12c52c8: Pushed 
62f95047015c: Pushed 
1eb2fd493d20: Pushed 
14b82c37a96e: Pushed 
â ‡ Launching Bedrock AgentCore...latest: digest: sha256:8634e1b955329d5896d2a575ab3e3fcd1553ba21a72005a9d24fd11aed381e80 size: 2414
Image pushed successfully
Image uploaded to ECR: 333736017435.dkr.ecr.us-west-2.amazonaws.com/bedrock-agentcore-cost_estimator_agent
Deploying to Bedrock AgentCore...
â ¦ Launching Bedrock AgentCore...âœ… Agent created/updated: arn:aws:bedrock-agentcore:us-west-2:333736017435:runtime/cost_estimator_agent-pPh4sFBIf0
Polling for endpoint to be ready...
â ¼ Launching Bedrock AgentCore...Agent endpoint: arn:aws:bedrock-agentcore:us-west-2:333736017435:runtime/cost_estimator_agent-pPh4sFBIf0/runtime-endpoint/DEFAULT
âœ“ Image pushed to ECR: 333736017435.dkr.ecr.us-west-2.amazonaws.com/bedrock-agentcore-cost_estimator_agent:latest
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Bedrock AgentCore Deployed â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Deployment Successful!                                                                                                            â”‚
â”‚                                                                                                                                   â”‚
â”‚ Agent Name: cost_estimator_agent                                                                                                  â”‚
â”‚ Agent ARN: arn:aws:bedrock-agentcore:us-west-2:333736017435:runtime/cost_estimator_agent-pPh4sFBIf0                               â”‚
â”‚ ECR URI: 333736017435.dkr.ecr.us-west-2.amazonaws.com/bedrock-agentcore-cost_estimator_agent                                      â”‚
â”‚                                                                                                                                   â”‚
â”‚ You can now check the status of your Bedrock AgentCore endpoint with:                                                             â”‚
â”‚ agentcore status                                                                                                                  â”‚
â”‚                                                                                                                                   â”‚
â”‚ You can now invoke your Bedrock AgentCore endpoint with:                                                                          â”‚
â”‚ agentcore invoke '{"prompt": "Hello"}'                                                                                            â”‚
â”‚                                                                                                                                   â”‚
â”‚ ğŸ“‹ Agent logs available at:                                                                                                       â”‚
â”‚    /aws/bedrock-agentcore/runtimes/cost_estimator_agent-pPh4sFBIf0-DEFAULT                                                        â”‚
â”‚    /aws/bedrock-agentcore/runtimes/cost_estimator_agent-pPh4sFBIf0-DEFAULT/runtime-logs                                           â”‚
â”‚                                                                                                                                   â”‚
â”‚ ğŸ’¡ Tail logs with:                                                                                                                â”‚
â”‚    aws logs tail /aws/bedrock-agentcore/runtimes/cost_estimator_agent-pPh4sFBIf0-DEFAULT --follow                                 â”‚
â”‚    aws logs tail /aws/bedrock-agentcore/runtimes/cost_estimator_agent-pPh4sFBIf0-DEFAULT --since 1h                               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

å‘¼ã³å‡ºã—ã¦ã¿ã‚‹

```bash
uv run agentcore invoke '{"prompt": "å°è¦æ¨¡ãªEC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§SSHæ¥ç¶šç”¨ã®ç’°å¢ƒã‚’æº–å‚™ã—ãŸã„ã€‚ã‚³ã‚¹ãƒˆã¯ã„ãã‚‰ã§ã™ã‹ï¼Ÿ"}'
```

ãƒ­ãƒ¼ã‚«ãƒ«ã¨åŒã˜ã‚ˆã†ãªçµæœãŒå¾—ã‚‰ã‚Œã‚Œã°OK!

# Lab 6: Memory - AgentCore Memoryã‚’ä½¿ç”¨ã—ãŸã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ ğŸ§ 

## 1. å­¦ç¿’ç›®æ¨™
Lab 6 ã§ã¯ã€ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸä½“é¨“ç­‰ã‚’æä¾›ã™ã‚‹ãŸã‚ã®ã€Œè¨˜æ†¶ã€ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã« Amazon Bedrock AgentCore Memory  ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚

ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã€éå»ã®è¦‹ç©ã‚‚ã‚Šã‚„å‚¾å‘ã‚’è¦šãˆã¦ãã‚Œã¦ã„ãŸã‚‰ã€ã‚ˆã‚Šã‚ãªãŸã®ãƒ‹ãƒ¼ã‚ºã«åˆã£ãŸææ¡ˆã‚’å—ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã§ã—ã‚‡ã†ã€‚ãŸã ã—ã€ä»–ã®äººã®è¦‹ç©ã‚‚ã‚Šã®æƒ…å ±ã‚’æ¼ã‚‰ã—ã¦ã—ã¾ã£ã¦ã¯å¤§å¤‰ã§ã™ã€‚å®‰å…¨ã‹ã¤åŠ¹æœçš„ã«è¨˜æ†¶ã‚’ä¿æŒã™ã‚‹ãŸã‚ AgentCore Memory ãŒã©ã®ã‚ˆã†ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã‚‹ã®ã‹æœ¬ Lab ã§å­¦ã‚“ã§ã„ãã¾ã™ã€‚

## 2. AgentCore Memory ã®ç‰¹å¾´

çŸ­æœŸè¨˜æ†¶ã¨é•·æœŸè¨˜æ†¶ã®å®Ÿè£…

AgentCore Memoryã¯ã€çŸ­æœŸè¨˜æ†¶ã¨é•·æœŸè¨˜æ†¶ã€2 ã¤ã® Memory æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

çŸ­æœŸè¨˜æ†¶ã¯ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¯¾è©±ã‚’ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦ä¿å­˜ã—ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ (å¯¾è©±) å†…ã§ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç¶­æŒã—ã¾ã™ã€‚
é•·æœŸè¨˜æ†¶ã¯ã€ä¼šè©±ã®è¦ç´„ã€ç¢ºèªã•ã‚ŒãŸäº‹å®Ÿã‚„çŸ¥è­˜ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ã€ã¨ã„ã£ãŸä¼šè©±ã‹ã‚‰æ¨å®šã•ã‚Œã‚‹ (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®) æ¬¡å›ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«å¼•ãç¶™ãã¹ãé‡è¦ãªæ´å¯Ÿã‚’ä¿å­˜ã—ã¾ã™ã€‚

Memory Strategy ã¯ã€AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒçŸ­æœŸè¨˜æ†¶ã‚’é•·æœŸè¨˜æ†¶ã¸ç§»ã™ãŸã‚ã®æˆ¦ç•¥ã‚’å®šç¾©ã—ã¾ã™ã€‚Memory Strategy ã«ã‚ˆã‚ŠçŸ­æœŸè¨˜æ†¶ã®å†…å®¹ãŒé•·æœŸè¨˜æ†¶ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

Memory Strategy ã¯ã€4 ã¤ã®ç¨®é¡ãŒã‚ã‚Šã¾ã™ã€‚

- SemanticMemoryStrategy: ä¼šè©±ã‹ã‚‰å¾—ã‚‰ã‚ŒãŸäº‹å®Ÿã‚„çŸ¥è­˜ã«æ³¨ç›®
- SummaryMemoryStrategy: è¦ç‚¹ã‚„æ±ºå®šäº‹é …ã«æ³¨ç›®
- UserPreferenceMemoryStrategy: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ã‚„é¸æŠãƒ‘ã‚¿ãƒ¼ãƒ³ã«æ³¨ç›®
- CustomMemoryStrategy: ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ç‰¹å®šã®æƒ…å ±ã«æ³¨ç›®

```bash
cd /workshop/sample-amazon-bedrock-agentcore-onboarding/06_memory
```

ä¸­èº«ã¯ä»¥ä¸‹ã®æ§‹é€ 

```bash
06_memory/
â”œâ”€â”€ README.md                      # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ test_memory.py                 # ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

AgentCore Memory ã®ä½œæˆ

```bash
uv run python test_memory.py
```

å®Ÿè¡Œãƒ­ã‚°ã‚’å‚ç…§ã—ã€çŸ­æœŸè¨˜æ†¶ã€é•·æœŸè¨˜æ†¶ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚ä»¥ä¸‹ã§ãƒã‚¤ãƒ³ãƒˆã‚’è§£èª¬ã—ã¾ã™ã€‚

```bash
ğŸš€ AWS Cost Estimator Agent with AgentCore Memory
============================================================
âš¡ Fast mode: Will reuse existing memory
2025-09-21 06:07:10,845 - __main__ - INFO - Initializing AgentWithMemory for actor: user123
2025-09-21 06:07:10,845 - __main__ - INFO - Initializing AgentCore Memory...
2025-09-21 06:07:10,865 - botocore.credentials - INFO - Found credentials from IAM Role: code-editor-CodeEditorInstanceBootstrapRole-V3yz6ainp9MZ
2025-09-21 06:07:10,932 - bedrock_agentcore.memory.client - INFO - Initialized MemoryClient for control plane: us-west-2, data plane: us-west-2
2025-09-21 06:07:11,117 - __main__ - INFO - Creating new AgentCore Memory...
2025-09-21 06:07:11,475 - bedrock_agentcore.memory.client - INFO - Created memory: cost_estimator_memory-yXY7cgB3UT
2025-09-21 06:07:11,475 - bedrock_agentcore.memory.client - INFO - Created memory cost_estimator_memory-yXY7cgB3UT, waiting for ACTIVE status...
2025-09-21 06:09:54,228 - bedrock_agentcore.memory.client - INFO - Memory cost_estimator_memory-yXY7cgB3UT is now ACTIVE (took 162 seconds)
2025-09-21 06:09:54,364 - __main__ - INFO - âœ… AgentCore Memory created successfully with ID: cost_estimator_memory-yXY7cgB3UT
2025-09-21 06:09:54,372 - __main__ - INFO - âœ… Bedrock Runtime client initialized
2025-09-21 06:09:54,387 - botocore.credentials - INFO - Found credentials from IAM Role: code-editor-CodeEditorInstanceBootstrapRole-V3yz6ainp9MZ

ğŸ“ Running cost estimates for different architectures...

ğŸ” Generating estimates...

--- Estimate #1 ---
I'll estimate the cost for your small blog architecture with a single EC2 t3.micro instance and RDS MySQL database.
Tool #1: estimate
2025-09-21 06:09:56,561 - __main__ - INFO - ğŸ” Estimating costs for: Single EC2 t3.micro instance with RDS MySQL for a small blog
2025-09-21 06:09:56,561 - cost_estimator_agent.cost_estimator_agent - INFO - Initializing AWS Cost Estimator Agent in region: us-west-2
2025-09-21 06:09:56,561 - cost_estimator_agent.cost_estimator_agent - INFO - ğŸ“Š Starting cost estimation...
2025-09-21 06:09:56,561 - cost_estimator_agent.cost_estimator_agent - INFO - Architecture: Single EC2 t3.micro instance with RDS MySQL for a small blog
2025-09-21 06:09:56,561 - cost_estimator_agent.cost_estimator_agent - INFO - ğŸš€ Initializing AWS Cost Estimation Agent...
2025-09-21 06:09:56,561 - cost_estimator_agent.cost_estimator_agent - INFO - Setting up AgentCore Code Interpreter...
2025-09-21 06:09:57,380 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… AgentCore Code Interpreter session started successfully
2025-09-21 06:09:57,380 - cost_estimator_agent.cost_estimator_agent - INFO - Setting up AWS Pricing MCP Client...
2025-09-21 06:09:57,380 - cost_estimator_agent.cost_estimator_agent - INFO - Getting current AWS credentials...
2025-09-21 06:09:57,395 - botocore.credentials - INFO - Found credentials from IAM Role: code-editor-CodeEditorInstanceBootstrapRole-V3yz6ainp9MZ
2025-09-21 06:09:57,436 - cost_estimator_agent.cost_estimator_agent - INFO - Using AWS identity: arn:aws:sts::333736017435:assumed-role/code-editor-CodeEditorInstanceBootstrapRole-V3yz6ainp9MZ/i-04d636349f967f37e
2025-09-21 06:09:57,436 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… Using AWS credentials with session token (likely from EC2 instance role)
2025-09-21 06:09:57,438 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… AWS Pricing MCP Client setup successfully with AWS credentials
INFO:mcp.server.lowlevel.server:Processing request of type ListToolsRequest
2025-09-21 06:09:58,446 - cost_estimator_agent.cost_estimator_agent - INFO - Found 9 AWS pricing tools
2025-09-21 06:09:58,464 - botocore.credentials - INFO - Found credentials from IAM Role: code-editor-CodeEditorInstanceBootstrapRole-V3yz6ainp9MZ
I'll analyze this architecture and provide an AWS cost estimate for a single EC2 t3.micro instance with RDS MySQL for a small blog.

First, let me gather the necessary pricing information for these services.
Tool #1: get_pricing_service_codes
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Now, I'll gather pricing information for EC2 and RDS. Let's first check the available attributes for Amazon EC2.
Tool #2: get_pricing_service_attributes
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Let's check the attributes for RDS.
Tool #3: get_pricing_service_attributes
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Now I'll check the specific values for EC2 t3.micro instance.
Tool #4: get_pricing_attribute_values
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
2025-09-21 06:10:19.216 | ERROR    | awslabs.aws_pricing_mcp_server.server:create_error_response:64 - Failed to retrieve values for attribute "region": No values found for attribute "region" of service "AmazonEC2". This could be due to an invalid service code or an invalid attribute name for this service.
Let me correct the attribute name for region to "location" for EC2:
Tool #5: get_pricing_attribute_values
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Let's check RDS database engines and types:
Tool #6: get_pricing_attribute_values
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Now let's get the pricing for EC2 t3.micro instance with Linux in US East region:
Tool #7: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Now let's get pricing for RDS MySQL db.t3.micro instance:
Tool #8: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Let's also get pricing for EBS storage which will be needed for both the EC2 instance and RDS database:
Tool #9: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Let's get RDS storage pricing as well:
Tool #10: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Now that I have collected the necessary pricing information, I'll calculate the monthly cost estimate for this architecture using the code interpreter:
Tool #11: execute_cost_calculation
2025-09-21 06:11:17,616 - cost_estimator_agent.cost_estimator_agent - INFO - ğŸ§® Executing calculation: Calculate the monthly and annual cost for a small blog running on EC2 t3.micro and RDS MySQL db.t3.micro
2025-09-21 06:11:17,849 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… Calculation completed successfully
Based on the analysis, here's the AWS cost estimate for a single EC2 t3.micro instance with RDS MySQL for a small blog:

## Architecture Description
- 1x EC2 t3.micro instance (2 vCPU, 1 GiB RAM) running Linux
- 1x RDS MySQL db.t3.micro instance (2 vCPU, 1 GiB RAM) - Single-AZ
- 10 GB EBS gp3 storage for EC2 instance
- 20 GB EBS gp2 storage for RDS MySQL database

## Monthly Cost Breakdown

| Service | Configuration | Unit Price | Monthly Cost |
|---------|--------------|------------|--------------|
| EC2 t3.micro | 1 instance, Linux | $0.0104/hour | $7.59 |
| EC2 EBS Storage | 10 GB gp3 | $0.08/GB-month | $0.80 |
| RDS MySQL db.t3.micro | Single-AZ | $0.017/hour | $12.41 |
| RDS MySQL Storage | 20 GB gp2 | $0.115/GB-month | $2.30 |
| **Total Monthly Cost** | | | **$23.10** |

## Cost Optimization Options

If you plan to run this architecture for a year or longer, you can save approximately 28% with reserved instances:

| Service | Configuration | Unit Price | Monthly Cost |
|---------|--------------|------------|--------------|
| EC2 t3.micro (1-year RI, No Upfront) | 1 instance, Linux | $0.0065/hour | $4.75 |
| EC2 EBS Storage | 10 GB gp3 | $0.08/GB-month | $0.80 |
| RDS MySQL db.t3.micro (1-year RI, No Upfront) | Single-AZ | $0.012/hour | $8.76 |
| RDS MySQL Storage | 20 GB gp2 | $0.115/GB-month | $2.30 |
| **Total Monthly Cost with RIs** | | | **$16.61** |

**Annual Savings with Reserved Instances:** $77.96 (28.1%)

## Discussion Points

1. **Single Point of Failure:** This architecture uses Single-AZ RDS, which means there is no automatic failover if the database availability zone experiences issues. For improved reliability, you could consider Multi-AZ RDS deployment, but it would double the database cost to about $34/month.

2. **Storage Configuration:**
   - For EC2, gp3 volume type was selected as it's more cost-efficient than gp2.
   - For RDS, only gp2 is currently supported.

3. **Additional Considerations:**
   - This estimate doesn't include data transfer costs, which should be minimal for a small blog.
   - You might want to consider adding Amazon S3 for media storage, which would be an additional cost (approximately $0.023/GB for storage plus minimal request charges).
   - CloudWatch detailed monitoring would add about $2.10 per instance if enabled.

4. **Free Tier Benefits:**
   - If you're eligible for AWS Free Tier, you could get 750 hours of t3.micro EC2 usage, 750 hours of db.t3.micro RDS usage, and some storage for free during the first 12 months.

This2025-09-21 06:11:37,581 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… Cost estimation completed
2025-09-21 06:11:37,894 - cost_estimator_agent.cost_estimator_agent - INFO - ğŸ§¹ Cleaning up resources...
2025-09-21 06:11:38,053 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… Code Interpreter session stopped
2025-09-21 06:11:38,055 - __main__ - INFO - Store event to short term memory
2025-09-21 06:11:38,207 - bedrock_agentcore.memory.client - INFO - Created event: 0000001758435098000#cae9b03d
2025-09-21 06:11:38,207 - __main__ - INFO - âœ… Cost estimation completed
 architecture provides a good starting point for a small blog while keeping costs manageable. As your traffic grows, you may need to scale up to larger instance types or add additional services.Here's the detailed cost estimate for your small blog architecture:

## Monthly Cost Summary
- **EC2 t3.micro**: $7.59
- **EC2 Storage (10GB)**: $0.80  
- **RDS MySQL db.t3.micro**: $12.41
- **RDS Storage (20GB)**: $2.30
- **Total: $23.10/month**

## Key Highlights

**Cost Optimization Opportunity**: You can save 28% (~$78/year) by using 1-year Reserved Instances, bringing your monthly cost down to **$16.61**.

**Free Tier Eligible**: If you're within your first 12 months on AWS, you could run this architecture for free under the AWS Free Tier!

**Architecture Considerations**:
- This is a Single-AZ setup for cost efficiency
- Uses gp3 storage for EC2 (more cost-effective)
- Perfect for small blogs with moderate traffic
- No redundancy included (single point of failure)

**Potential Add-ons to Consider**:
- S3 bucket for media storage (~$0.023/GB)
- Multi-AZ RDS for high availability (+~$12/month)
- CloudWatch detailed monitoring (+$2.10/month)

This architecture provides a solid foundation for a small blog while keeping costs very reasonable. Would you like me to explore any variations or compare this with alternative architectures?Here's the detailed cost estimate for your small blog architecture:

## Monthly Cost Summary
- **EC2 t3.micro**: $7.59
- **EC2 Storage (10GB)**: $0.80  
- **RDS MySQL db.t3.micro**: $12.41
- **RDS Storage (20GB)**: $2.30
- **Total: $23.10/month**

## Key Highlights

**Cost Optimization Opportunity**: You can save 28% (~$78/year) by using 1-year Reserved Instances, bringing your monthly cost down to **$16.61**.

**Free Tier Eligible**: If you're within your first 12 months on AWS, you could run this architecture for free under the AWS Free Tier!

**Architecture Considerations**:
- This is a Single-AZ setup for cost efficiency
- Uses gp3 storage for EC2 (more cost-effective)
- Perfect for small blogs with moderate traffic
- No redundancy included (single point of failure)

**Potential Add-ons to Consider**:
- S3 bucket for media storage (~$0.023/GB)
- Multi-AZ RDS for high availability (+~$12/month)
- CloudWatch detailed monitoring (+$2.10/month)

This architecture provides a solid foundation for a small blog while keeping costs very reasonable. Would you like me to explore any variations or compare this with alternative architectures?

Architecture: Single EC2 t3.micro instance with RDS MySQL for a small blog
[{'text': "Here's the detailed cost estimate for your small blog architecture:\n\n## Monthly Cost Summary\n- **EC2 t3.micro**: $7.59\n- **EC2 Storage (10GB)**: $0.80  \n- **RDS MySQL db.t3.micro**: $12.41\n- **RDS Storage (20GB)**: $2.30\n- **Total: $23.10/month**\n\n## Key Highlights\n\n**Cost Optimization Opportunity**: You can save 28% (~$78/year) by using 1-year Reserved Instances, bringing your monthly cost down to **$16.61**.\n\n**Free Tier Eligible**: If you're within your first 12 months on AWS, you could run this architecture for free under the AWS Free Tier!\n\n**Architecture Considerations**:\n- This is a Single-AZ setup for cost efficiency\n- Uses gp3 storage for EC2 (more cost-effective)\n- Perfect for small blogs with moderate traffic\n- No redundancy included (single point of failure)\n\n**Potential Add-ons to Consider**:\n- S3 bucket for media storage (~$0.023/GB)\n- Multi-AZ RDS for high availability (+~$12/month)\n- CloudWatch detailed monitoring (+$2.10/month)\n\nThis architecture provides a solid foundation for a small blog while keeping costs very reasonable. Would you like me to explore any variations or compare this with alternative architectures?"}]

--- Estimate #2 ---
I'll estimate the cost for your medium traffic web application with load balanced EC2 t3.small instances and RDS MySQL.
Tool #2: estimate
2025-09-21 06:11:47,060 - __main__ - INFO - ğŸ” Estimating costs for: Load balanced EC2 t3.small instances with RDS MySQL for medium traffic web app
2025-09-21 06:11:47,060 - cost_estimator_agent.cost_estimator_agent - INFO - Initializing AWS Cost Estimator Agent in region: us-west-2
2025-09-21 06:11:47,060 - cost_estimator_agent.cost_estimator_agent - INFO - ğŸ“Š Starting cost estimation...
2025-09-21 06:11:47,060 - cost_estimator_agent.cost_estimator_agent - INFO - Architecture: Load balanced EC2 t3.small instances with RDS MySQL for medium traffic web app
2025-09-21 06:11:47,060 - cost_estimator_agent.cost_estimator_agent - INFO - ğŸš€ Initializing AWS Cost Estimation Agent...
2025-09-21 06:11:47,060 - cost_estimator_agent.cost_estimator_agent - INFO - Setting up AgentCore Code Interpreter...
2025-09-21 06:11:47,926 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… AgentCore Code Interpreter session started successfully
2025-09-21 06:11:47,926 - cost_estimator_agent.cost_estimator_agent - INFO - Setting up AWS Pricing MCP Client...
2025-09-21 06:11:47,926 - cost_estimator_agent.cost_estimator_agent - INFO - Getting current AWS credentials...
2025-09-21 06:11:47,939 - botocore.credentials - INFO - Found credentials from IAM Role: code-editor-CodeEditorInstanceBootstrapRole-V3yz6ainp9MZ
2025-09-21 06:11:47,975 - cost_estimator_agent.cost_estimator_agent - INFO - Using AWS identity: arn:aws:sts::333736017435:assumed-role/code-editor-CodeEditorInstanceBootstrapRole-V3yz6ainp9MZ/i-04d636349f967f37e
2025-09-21 06:11:47,975 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… Using AWS credentials with session token (likely from EC2 instance role)
2025-09-21 06:11:47,977 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… AWS Pricing MCP Client setup successfully with AWS credentials
INFO:mcp.server.lowlevel.server:Processing request of type ListToolsRequest
2025-09-21 06:11:48,965 - cost_estimator_agent.cost_estimator_agent - INFO - Found 9 AWS pricing tools
2025-09-21 06:11:48,979 - botocore.credentials - INFO - Found credentials from IAM Role: code-editor-CodeEditorInstanceBootstrapRole-V3yz6ainp9MZ
I'll provide an AWS cost estimate for your architecture description. Let me analyze the components and retrieve the necessary pricing information.

First, let me identify the AWS services involved in this architecture:
- EC2 t3.small instances (load balanced)
- RDS MySQL database
- Load balancer (assumed to be ELB)

Let me get the pricing information for these services.
Tool #1: get_pricing_service_codes
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Now that I have the list of service codes, let me get the specific pricing data for the services in our architecture. First for EC2:
Tool #2: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Now let me get the pricing for RDS MySQL:
Tool #3: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Now let me get the pricing for the Elastic Load Balancer:
Tool #4: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Let me also get pricing for storage (EBS volumes) that will be needed for EC2 instances:
Tool #5: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Let me also get RDS storage pricing:
Tool #6: get_pricing
INFO:mcp.server.lowlevel.server:Processing request of type CallToolRequest
INFO:botocore.credentials:Found credentials in environment variables.
Now, let me calculate the estimated costs based on the pricing information I've gathered. I'll make some reasonable assumptions about the architecture:
Tool #7: execute_cost_calculation
2025-09-21 06:12:45,092 - cost_estimator_agent.cost_estimator_agent - INFO - ğŸ§® Executing calculation: Calculate AWS cost estimation for load balanced EC2 t3.small instances with RDS MySQL database
2025-09-21 06:12:45,945 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… Calculation completed successfully
Let me modify the calculation to use standard formatting instead of the tabulate package:
Tool #8: execute_cost_calculation
2025-09-21 06:13:04,635 - cost_estimator_agent.cost_estimator_agent - INFO - ğŸ§® Executing calculation: Calculate AWS cost estimation for load balanced EC2 t3.small instances with RDS MySQL database
2025-09-21 06:13:04,828 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… Calculation completed successfully
Based on my analysis, here is the AWS cost estimation for your architecture:

## Architecture Overview
- Load balanced EC2 t3.small instances (2 instances)
- RDS MySQL database (db.t3.medium)
- Elastic Load Balancer
- EBS storage for EC2 instances
- RDS storage

## Cost Estimate Breakdown

| Service | Calculation | Monthly Cost |
|---------|-------------|--------------|
| EC2 t3.small instances | $0.0208/hour Ã— 2 instances Ã— 730 hours | $30.37 |
| EBS gp3 Storage | $0.08/GB-month Ã— 30 GB Ã— 2 instances | $4.80 |
| RDS MySQL db.t3.medium | $0.0680/hour Ã— 730 hours | $49.64 |
| RDS MySQL Storage (gp2) | $0.115/GB-month Ã— 100 GB | $11.50 |
| Elastic Load Balancer | $0.025/hour Ã— 730 hours | $18.25 |
| ELB Data Processing | $0.008/GB Ã— 100 GB | $0.80 |
| **Total Monthly Cost** | | **$115.36** |

## Assumptions
- 2 EC2 t3.small instances running continuously
- 30 GB EBS gp3 storage per EC2 instance
- RDS MySQL db.t3.medium instance (single-AZ deployment)
- 100 GB of RDS gp2 storage
- 100 GB of data transfer through the load balancer
- AWS region: us-east-1
- 730 hours per month (average)

## Recommendations
1. **Cost Optimization:**
   - Consider reserved instances for EC2 and RDS to save up to 40-60% if you plan to use them for 1+ years
   - For example, a 1-year no upfront commitment for the EC2 instances would reduce the hourly rate from $0.0208 to $0.0130, saving about 37%

2. **Performance & Scalability:**
   - Implement Auto Scaling groups to adjust capacity based on demand
   - Monitor resource utilization to right-size instances (CPU, memory, storage)

3. **Reliability:**
   - Consider Multi-AZ deployment for RDS to improve availability, though this would roughly double the database cost
   - Set up proper health checks and recovery procedures

4. **Monitoring:**
   - Use AWS Cost Explorer to track actual costs versus budget
   - Set up CloudWatch alarms for cost anomalies

This2025-09-21 06:13:19,352 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… Cost estimation completed
2025-09-21 06:13:19,608 - cost_estimator_agent.cost_estimator_agent - INFO - ğŸ§¹ Cleaning up resources...
2025-09-21 06:13:19,766 - cost_estimator_agent.cost_estimator_agent - INFO - âœ… Code Interpreter session stopped
2025-09-21 06:13:19,768 - __main__ - INFO - Store event to short term memory
2025-09-21 06:13:19,866 - bedrock_agentcore.memory.client - INFO - Created event: 0000001758435199000#45b0a163
2025-09-21 06:13:19,866 - __main__ - INFO - âœ… Cost estimation completed
 estimate provides a baseline for running a medium traffic web application. Actual costs may vary based on usage patterns, traffic spikes, and additional services you might add (such as CloudWatch detailed monitoring, backup services, etc.).Here's the detailed cost estimate for your medium traffic web application with load balancing:

## Monthly Cost Breakdown
- **2x EC2 t3.small instances**: $30.37
- **EBS Storage (60GB total)**: $4.80
- **RDS MySQL db.t3.medium**: $49.64
- **RDS Storage (100GB)**: $11.50
- **Elastic Load Balancer**: $18.25
- **Data Processing**: $0.80
- **Total: $115.36/month**

## Architecture Benefits
âœ… **High Availability**: Load balancer distributes traffic across multiple instances
âœ… **Scalability**: Can handle medium traffic loads with room to grow
âœ… **Fault Tolerance**: If one EC2 instance fails, traffic continues to the other
âœ… **Performance**: t3.small instances provide 2 vCPUs and 2GB RAM each

## Cost Optimization Opportunities

**Reserved Instances Savings**:
- 1-year commitment could save ~37% on EC2 costs
- RDS reserved instances could save ~40%
- **Potential savings: ~$35-45/month**

**Additional Considerations**:
- **Multi-AZ RDS**: +$49.64/month for database high availability
- **Auto Scaling**: Could reduce costs during low traffic periods
- **CloudWatch**: +$4.20/month for detailed monitoring of both instances

## Comparison with Previous Estimate
This medium traffic architecture costs about **5x more** than your small blog setup ($115 vs $23), but provides:
- 4x more compute power (2 t3.small vs 1 t3.micro)
- Load balancing and high availability
- Larger database instance for better performance
- More storage capacity

Would you like me to compare these two architectures side-by-side, or explore variations like auto-scaling configurations?Here's the detailed cost estimate for your medium traffic web application with load balancing:

## Monthly Cost Breakdown
- **2x EC2 t3.small instances**: $30.37
- **EBS Storage (60GB total)**: $4.80
- **RDS MySQL db.t3.medium**: $49.64
- **RDS Storage (100GB)**: $11.50
- **Elastic Load Balancer**: $18.25
- **Data Processing**: $0.80
- **Total: $115.36/month**

## Architecture Benefits
âœ… **High Availability**: Load balancer distributes traffic across multiple instances
âœ… **Scalability**: Can handle medium traffic loads with room to grow
âœ… **Fault Tolerance**: If one EC2 instance fails, traffic continues to the other
âœ… **Performance**: t3.small instances provide 2 vCPUs and 2GB RAM each

## Cost Optimization Opportunities

**Reserved Instances Savings**:
- 1-year commitment could save ~37% on EC2 costs
- RDS reserved instances could save ~40%
- **Potential savings: ~$35-45/month**

**Additional Considerations**:
- **Multi-AZ RDS**: +$49.64/month for database high availability
- **Auto Scaling**: Could reduce costs during low traffic periods
- **CloudWatch**: +$4.20/month for detailed monitoring of both instances

## Comparison with Previous Estimate
This medium traffic architecture costs about **5x more** than your small blog setup ($115 vs $23), but provides:
- 4x more compute power (2 t3.small vs 1 t3.micro)
- Load balancing and high availability
- Larger database instance for better performance
- More storage capacity

Would you like me to compare these two architectures side-by-side, or explore variations like auto-scaling configurations?

Architecture: Load balanced EC2 t3.small instances with RDS MySQL for medium traffic web app
[{'text': "Here's the detailed cost estimate for your medium traffic web application with load balancing:\n\n## Monthly Cost Breakdown\n- **2x EC2 t3.small instances**: $30.37\n- **EBS Storage (60GB total)**: $4.80\n- **RDS MySQL db.t3.medium**: $49.64\n- **RDS Storage (100GB)**: $11.50\n- **Elastic Load Balancer**: $18.25\n- **Data Processing**: $0.80\n- **Total: $115.36/month**\n\n## Architecture Benefits\nâœ… **High Availability**: Load balancer distributes traffic across multiple instances\nâœ… **Scalability**: Can handle medium traffic loads with room to grow\nâœ… **Fault Tolerance**: If one EC2 instance fails, traffic continues to the other\nâœ… **Performance**: t3.small instances provide 2 vCPUs and 2GB RAM each\n\n## Cost Optimization Opportunities\n\n**Reserved Instances Savings**:\n- 1-year commitment could save ~37% on EC2 costs\n- RDS reserved instances could save ~40%\n- **Potential savings: ~$35-45/month**\n\n**Additional Considerations**:\n- **Multi-AZ RDS**: +$49.64/month for database high availability\n- **Auto Scaling**: Could reduce costs during low traffic periods\n- **CloudWatch**: +$4.20/month for detailed monitoring of both instances\n\n## Comparison with Previous Estimate\nThis medium traffic architecture costs about **5x more** than your small blog setup ($115 vs $23), but provides:\n- 4x more compute power (2 t3.small vs 1 t3.micro)\n- Load balancing and high availability\n- Larger database instance for better performance\n- More storage capacity\n\nWould you like me to compare these two architectures side-by-side, or explore variations like auto-scaling configurations?"}]

============================================================
ğŸ“Š Comparing all estimates...
I'll compare the two architecture estimates you just generated to help you understand the differences and trade-offs.
Tool #3: compare
2025-09-21 06:13:31,039 - __main__ - INFO - ğŸ“Š Retrieving estimates for comparison...
2025-09-21 06:13:31,186 - bedrock_agentcore.memory.client - INFO - Retrieved total of 2 events
2025-09-21 06:13:31,186 - __main__ - INFO - ğŸ” Comparing 2 estimates... ['## Estimate\n**Input:**:\nLoad balanced EC2 t3.small instances with RDS MySQL for medium traffic web app\n**Output:**:\nBased on my analysis, here is the AWS cost estimation for your architecture:\n\n## Architecture Overview\n- Load balanced EC2 t3.small instances (2 instances)\n- RDS MySQL database (db.t3.medium)\n- Elastic Load Balancer\n- EBS storage for EC2 instances\n- RDS storage\n\n## Cost Estimate Breakdown\n\n| Service | Calculation | Monthly Cost |\n|---------|-------------|--------------|\n| EC2 t3.small instances | $0.0208/hour Ã— 2 instances Ã— 730 hours | $30.37 |\n| EBS gp3 Storage | $0.08/GB-month Ã— 30 GB Ã— 2 instances | $4.80 |\n| RDS MySQL db.t3.medium | $0.0680/hour Ã— 730 hours | $49.64 |\n| RDS MySQL Storage (gp2) | $0.115/GB-month Ã— 100 GB | $11.50 |\n| Elastic Load Balancer | $0.025/hour Ã— 730 hours | $18.25 |\n| ELB Data Processing | $0.008/GB Ã— 100 GB | $0.80 |\n| **Total Monthly Cost** | | **$115.36** |\n\n## Assumptions\n- 2 EC2 t3.small instances running continuously\n- 30 GB EBS gp3 storage per EC2 instance\n- RDS MySQL db.t3.medium instance (single-AZ deployment)\n- 100 GB of RDS gp2 storage\n- 100 GB of data transfer through the load balancer\n- AWS region: us-east-1\n- 730 hours per month (average)\n\n## Recommendations\n1. **Cost Optimization:**\n   - Consider reserved instances for EC2 and RDS to save up to 40-60% if you plan to use them for 1+ years\n   - For example, a 1-year no upfront commitment for the EC2 instances would reduce the hourly rate from $0.0208 to $0.0130, saving about 37%\n\n2. **Performance & Scalability:**\n   - Implement Auto Scaling groups to adjust capacity based on demand\n   - Monitor resource utilization to right-size instances (CPU, memory, storage)\n\n3. **Reliability:**\n   - Consider Multi-AZ deployment for RDS to improve availability, though this would roughly double the database cost\n   - Set up proper health checks and recovery procedures\n\n4. **Monitoring:**\n   - Use AWS Cost Explorer to track actual costs versus budget\n   - Set up CloudWatch alarms for cost anomalies\n\nThis estimate provides a baseline for running a medium traffic web application. Actual costs may vary based on usage patterns, traffic spikes, and additional services you might add (such as CloudWatch detailed monitoring, backup services, etc.).', "## Estimate\n**Input:**:\nSingle EC2 t3.micro instance with RDS MySQL for a small blog\n**Output:**:\nBased on the analysis, here's the AWS cost estimate for a single EC2 t3.micro instance with RDS MySQL for a small blog:\n\n## Architecture Description\n- 1x EC2 t3.micro instance (2 vCPU, 1 GiB RAM) running Linux\n- 1x RDS MySQL db.t3.micro instance (2 vCPU, 1 GiB RAM) - Single-AZ\n- 10 GB EBS gp3 storage for EC2 instance\n- 20 GB EBS gp2 storage for RDS MySQL database\n\n## Monthly Cost Breakdown\n\n| Service | Configuration | Unit Price | Monthly Cost |\n|---------|--------------|------------|--------------|\n| EC2 t3.micro | 1 instance, Linux | $0.0104/hour | $7.59 |\n| EC2 EBS Storage | 10 GB gp3 | $0.08/GB-month | $0.80 |\n| RDS MySQL db.t3.micro | Single-AZ | $0.017/hour | $12.41 |\n| RDS MySQL Storage | 20 GB gp2 | $0.115/GB-month | $2.30 |\n| **Total Monthly Cost** | | | **$23.10** |\n\n## Cost Optimization Options\n\nIf you plan to run this architecture for a year or longer, you can save approximately 28% with reserved instances:\n\n| Service | Configuration | Unit Price | Monthly Cost |\n|---------|--------------|------------|--------------|\n| EC2 t3.micro (1-year RI, No Upfront) | 1 instance, Linux | $0.0065/hour | $4.75 |\n| EC2 EBS Storage | 10 GB gp3 | $0.08/GB-month | $0.80 |\n| RDS MySQL db.t3.micro (1-year RI, No Upfront) | Single-AZ | $0.012/hour | $8.76 |\n| RDS MySQL Storage | 20 GB gp2 | $0.115/GB-month | $2.30 |\n| **Total Monthly Cost with RIs** | | | **$16.61** |\n\n**Annual Savings with Reserved Instances:** $77.96 (28.1%)\n\n## Discussion Points\n\n1. **Single Point of Failure:** This architecture uses Single-AZ RDS, which means there is no automatic failover if the database availability zone experiences issues. For improved reliability, you could consider Multi-AZ RDS deployment, but it would double the database cost to about $34/month.\n\n2. **Storage Configuration:**\n   - For EC2, gp3 volume type was selected as it's more cost-efficient than gp2.\n   - For RDS, only gp2 is currently supported.\n\n3. **Additional Considerations:**\n   - This estimate doesn't include data transfer costs, which should be minimal for a small blog.\n   - You might want to consider adding Amazon S3 for media storage, which would be an additional cost (approximately $0.023/GB for storage plus minimal request charges).\n   - CloudWatch detailed monitoring would add about $2.10 per instance if enabled.\n\n4. **Free Tier Benefits:**\n   - If you're eligible for AWS Free Tier, you could get 750 hours of t3.micro EC2 usage, 750 hours of db.t3.micro RDS usage, and some storage for free during the first 12 months.\n\nThis architecture provides a good starting point for a small blog while keeping costs manageable. As your traffic grows, you may need to scale up to larger instance types or add additional services."]
2025-09-21 06:13:47,409 - __main__ - INFO - âœ… Comparison completed for 2 estimates
Here's a comprehensive comparison of your two AWS architecture estimates:

## ğŸ“Š Cost Overview
- **Small Blog**: $23.10/month 
- **Medium Traffic Web App**: $115.36/month
- **Cost Multiplier**: 5x more expensive

## ğŸ—ï¸ Architecture Comparison

| Feature | Small Blog | Medium Traffic Web App | Advantage |
|---------|------------|----------------------|-----------|
| **Availability** | Single point of failure | Load balanced, redundant | Medium setup wins |
| **Compute Power** | 2 vCPUs, 1GB RAM | 8 vCPUs, 4GB RAM | 4x more powerful |
| **Database** | db.t3.micro | db.t3.medium | 4x more DB resources |
| **Storage** | 30GB total | 160GB total | 5x more storage |
| **Redundancy** | None | Built-in failover | High availability |

## ğŸ’° Cost Distribution

**Small Blog Spending**:
- 64% Database costs ($14.71)
- 36% Compute costs ($8.39)

**Medium Traffic Spending**:
- 53% Database costs ($61.14) 
- 30% Compute costs ($35.17)
- 17% Load balancing ($19.05)

## ğŸ¯ Key Insights

1. **Performance vs Cost**: You get 4x compute performance for 5x the cost - quite efficient scaling
2. **Database Heavy**: Both architectures are database-cost dominated (53-64% of total)
3. **Load Balancer Tax**: Adding high availability costs ~$19/month but eliminates downtime risk

## ğŸ“ˆ Migration Path Strategy

If you want to grow from small to medium:
1. **Start**: Small blog ($23/month)
2. **Upgrade compute**: Switch to t3.small ($35/month) 
3. **Add redundancy**: Add load balancer + 2nd instance ($80/month)
4. **Scale database**: Upgrade to db.t3.medium ($115/month)

## ğŸ† Which Should You Choose?

**Choose Small Blog if**:
- Learning/personal project
- Predictable low traffic
- Budget under $30/month
- Can tolerate occasional downtime

**Choose Medium Traffic if**:
- Production business application  
- Growing or variable traffic
- Need high availability (99.9%+ uptime)
- Budget allows $100+/month

The 5x cost difference delivers significant reliability and performance improvements - it's well-justified for production workloads!Here's a comprehensive comparison of your two AWS architecture estimates:

## ğŸ“Š Cost Overview
- **Small Blog**: $23.10/month 
- **Medium Traffic Web App**: $115.36/month
- **Cost Multiplier**: 5x more expensive

## ğŸ—ï¸ Architecture Comparison

| Feature | Small Blog | Medium Traffic Web App | Advantage |
|---------|------------|----------------------|-----------|
| **Availability** | Single point of failure | Load balanced, redundant | Medium setup wins |
| **Compute Power** | 2 vCPUs, 1GB RAM | 8 vCPUs, 4GB RAM | 4x more powerful |
| **Database** | db.t3.micro | db.t3.medium | 4x more DB resources |
| **Storage** | 30GB total | 160GB total | 5x more storage |
| **Redundancy** | None | Built-in failover | High availability |

## ğŸ’° Cost Distribution

**Small Blog Spending**:
- 64% Database costs ($14.71)
- 36% Compute costs ($8.39)

**Medium Traffic Spending**:
- 53% Database costs ($61.14) 
- 30% Compute costs ($35.17)
- 17% Load balancing ($19.05)

## ğŸ¯ Key Insights

1. **Performance vs Cost**: You get 4x compute performance for 5x the cost - quite efficient scaling
2. **Database Heavy**: Both architectures are database-cost dominated (53-64% of total)
3. **Load Balancer Tax**: Adding high availability costs ~$19/month but eliminates downtime risk

## ğŸ“ˆ Migration Path Strategy

If you want to grow from small to medium:
1. **Start**: Small blog ($23/month)
2. **Upgrade compute**: Switch to t3.small ($35/month) 
3. **Add redundancy**: Add load balancer + 2nd instance ($80/month)
4. **Scale database**: Upgrade to db.t3.medium ($115/month)

## ğŸ† Which Should You Choose?

**Choose Small Blog if**:
- Learning/personal project
- Predictable low traffic
- Budget under $30/month
- Can tolerate occasional downtime

**Choose Medium Traffic if**:
- Production business application  
- Growing or variable traffic
- Need high availability (99.9%+ uptime)
- Budget allows $100+/month

The 5x cost difference delivers significant reliability and performance improvements - it's well-justified for production workloads!


============================================================
ğŸ’¡ Getting personalized recommendation...
I'd be happy to propose the best architecture for your specific needs! However, to provide you with a personalized recommendation, I need to understand your preferences and requirements better.
Tool #4: propose
2025-09-21 06:13:59,885 - __main__ - INFO - ğŸ’¡ Generating architecture proposal based on user history...
2025-09-21 06:14:00,099 - bedrock_agentcore.memory.client - INFO - Retrieved 2 memories from namespace: /preferences/user123
2025-09-21 06:14:00,099 - __main__ - INFO - ğŸ” Generating proposal with requirements: User is asking for architecture recommendation but hasn't specified their specific requirements, preferences, or use case details yet
Historical data: ['{"context":"User specified the exact infrastructure requirements for hosting a small blog","preference":"Small blog infrastructure with single EC2 t3.micro and RDS MySQL","categories":["cloud computing","web hosting","infrastructure"]}', '{"context":"User interested in a minimal, cost-effective hosting setup","preference":"Prefers lightweight and economical cloud infrastructure","categories":["cloud computing","cost optimization","web hosting"]}']
2025-09-21 06:14:18,540 - __main__ - INFO - âœ… Architecture proposal generated
Based on your previous estimates, I can see you're evaluating architectures ranging from simple blogs to medium traffic applications. Here's my personalized architecture proposal for you:

## ğŸ¯ **Recommended: Progressive Architecture**

I'm proposing a **hybrid approach** that starts minimal but is designed for growth, based on your exploration of both simple and load-balanced setups.

### **Phase 1: Smart Starting Point (~$38/month)**
```
CloudFront â†’ ALB â†’ EC2 t3.micro â†’ RDS t3.micro
     â†“
   S3 Static Assets
```

**Why this beats your simple blog setup:**
- âœ… Only $15 more than basic blog ($38 vs $23)
- âœ… Includes CDN for global performance 
- âœ… Load balancer ready for adding 2nd instance
- âœ… S3 offloads static content (reduces EC2 load)

### **Phase 2: Scale When Ready (~$66/month)**
```
Route53 â†’ CloudFront â†’ ALB â†’ Auto Scaling â†’ RDS Multi-AZ
                              (2 instances)      â†“
                                          ElastiCache
```

## ğŸ’¡ **Why This Approach is Perfect for You:**

**Cost Efficiency**: 
- Starts 65% cheaper than your medium traffic setup
- Grows incrementally instead of 5x jump
- Built-in optimization with CDN + S3

**Smart Scaling Path**:
- No architecture rebuilding needed
- Just add instances to existing load balancer
- Database scales independently

**Best of Both Worlds**:
- High availability foundation (ALB from day 1)
- Pay-as-you-grow model
- Production-ready from the start

## ğŸ“Š **Cost Comparison with Your Estimates:**

| Your Options | My Proposal | Savings/Benefits |
|-------------|-------------|------------------|
| Small Blog: $23/month | Phase 1: $38/month | +$15 for CDN + Load Balancer |
| Medium Traffic: $115/month | Phase 2: $66/month | **$49/month savings** |

## ğŸš€ **Migration Timeline:**

**Month 1-3**: Start Phase 1, monitor traffic
**Month 4-6**: Add auto-scaling if needed  
**Month 6+**: Consider Reserved Instances (save 40%)
**Month 12+**: Evaluate Phase 2 upgrades

## ğŸ **Bonus Features Included:**
- **Free SSL certificates** (ACM)
- **Global CDN** (faster than single-region)
- **S3 static hosting** (offload images/CSS)
- **CloudWatch monitoring** (basic tier)

Would you like me to generate a detailed cost estimate for this progressive architecture, or would you prefer to adjust any specific requirements (budget, traffic expectations, geographic regions, etc.)?Based on your previous estimates, I can see you're evaluating architectures ranging from simple blogs to medium traffic applications. Here's my personalized architecture proposal for you:

## ğŸ¯ **Recommended: Progressive Architecture**

I'm proposing a **hybrid approach** that starts minimal but is designed for growth, based on your exploration of both simple and load-balanced setups.

### **Phase 1: Smart Starting Point (~$38/month)**
```
CloudFront â†’ ALB â†’ EC2 t3.micro â†’ RDS t3.micro
     â†“
   S3 Static Assets
```

**Why this beats your simple blog setup:**
- âœ… Only $15 more than basic blog ($38 vs $23)
- âœ… Includes CDN for global performance 
- âœ… Load balancer ready for adding 2nd instance
- âœ… S3 offloads static content (reduces EC2 load)

### **Phase 2: Scale When Ready (~$66/month)**
```
Route53 â†’ CloudFront â†’ ALB â†’ Auto Scaling â†’ RDS Multi-AZ
                              (2 instances)      â†“
                                          ElastiCache
```

## ğŸ’¡ **Why This Approach is Perfect for You:**

**Cost Efficiency**: 
- Starts 65% cheaper than your medium traffic setup
- Grows incrementally instead of 5x jump
- Built-in optimization with CDN + S3

**Smart Scaling Path**:
- No architecture rebuilding needed
- Just add instances to existing load balancer
- Database scales independently

**Best of Both Worlds**:
- High availability foundation (ALB from day 1)
- Pay-as-you-grow model
- Production-ready from the start

## ğŸ“Š **Cost Comparison with Your Estimates:**

| Your Options | My Proposal | Savings/Benefits |
|-------------|-------------|------------------|
| Small Blog: $23/month | Phase 1: $38/month | +$15 for CDN + Load Balancer |
| Medium Traffic: $115/month | Phase 2: $66/month | **$49/month savings** |

## ğŸš€ **Migration Timeline:**

**Month 1-3**: Start Phase 1, monitor traffic
**Month 4-6**: Add auto-scaling if needed  
**Month 6+**: Consider Reserved Instances (save 40%)
**Month 12+**: Evaluate Phase 2 upgrades

## ğŸ **Bonus Features Included:**
- **Free SSL certificates** (ACM)
- **Global CDN** (faster than single-region)
- **S3 static hosting** (offload images/CSS)
- **CloudWatch monitoring** (basic tier)

Would you like me to generate a detailed cost estimate for this progressive architecture, or would you prefer to adjust any specific requirements (budget, traffic expectations, geographic regions, etc.)?

2025-09-21 06:14:29,988 - __main__ - INFO - ğŸ§¹ Memory preserved for reuse (use --force to recreate)
2025-09-21 06:14:29,988 - __main__ - INFO - âœ… Context manager exit completed
```

Bedrockçµ±åˆã‚‚è¡Œãªã£ã¦ã„ã‚‹

```bash
Amazon Bedrockã®converse APIã‚’ä½¿ç”¨ã—ã¦Claude 3 Haikuãƒ¢ãƒ‡ãƒ«ã§æ¯”è¼ƒåˆ†æã¨ææ¡ˆç”Ÿæˆã‚’è¡Œã„ã¾ã™
```